{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Cloudrift","text":"<p>AWS Infrastructure Drift Detection &amp; Compliance Tool</p> <p>Cloudrift scans your AWS infrastructure against Terraform plan files to detect configuration drift, evaluate 49 security policies with OPA, and report compliance across 5 industry frameworks \u2014 all from a beautiful dark-themed dashboard.</p> <p></p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li> <p> Drift Detection</p> <p>Compare live AWS resources against Terraform plan files. See added, removed, and changed attributes in a 3-column diff viewer.</p> </li> <li> <p> 49 Security Policies</p> <p>OPA-powered policy engine covering S3, EC2, RDS, IAM, Security Groups, CloudTrail, KMS, Lambda, ELB, VPC, and more.</p> </li> <li> <p> 5 Compliance Frameworks</p> <p>HIPAA, GDPR, ISO 27001, PCI DSS, and SOC 2 compliance scoring with per-framework breakdowns.</p> </li> <li> <p> Resource Builder</p> <p>Generate Terraform plan files via Terraform CLI integration, manual JSON editor, or file upload.</p> </li> <li> <p> Docker &amp; Desktop</p> <p>Run as a Docker container (web) or native macOS desktop app. Same UI, same features.</p> </li> <li> <p> REST API</p> <p>14 API endpoints for scanning, configuration, file management, and Terraform operations.</p> </li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":"Docker (Recommended)Desktop (macOS) <pre><code>docker pull inayathulla/cloudrift-ui:latest\ndocker run -p 8080:80 \\\n  -v ~/.aws:/root/.aws:ro \\\n  inayathulla/cloudrift-ui:latest\n</code></pre> <p>Open http://localhost:8080</p> <pre><code>git clone https://github.com/inayathulla/cloudrift-ui.git\ncd cloudrift-ui\nflutter pub get\nflutter run -d macos\n</code></pre> <p>Get Started  View on GitHub </p>"},{"location":"#screenshots","title":"Screenshots","text":"Dashboard \u2014 KPIs, trends, compliance rings Scan \u2014 Service selector, live scan output Resource Builder \u2014 Terraform / Manual / Upload Resources \u2014 Drift summary with filters Policies \u2014 49 OPA policies by service Compliance \u2014 5 framework scores Settings \u2014 CLI path, config, theme"},{"location":"contributing/","title":"Contributing","text":"<p>Contributions to Cloudrift are welcome! This guide covers the process for submitting changes.</p>"},{"location":"contributing/#getting-started","title":"Getting Started","text":"<ol> <li>Fork the repository on GitHub</li> <li>Clone your fork locally</li> <li>Set up the development environment (see Local Setup)</li> <li>Create a feature branch from <code>main</code></li> </ol> <pre><code>git checkout -b feature/my-feature main\n</code></pre>"},{"location":"contributing/#development-workflow","title":"Development Workflow","text":"<ol> <li>Make your changes on the feature branch</li> <li>Run analysis to check for issues:    <pre><code>flutter analyze\n</code></pre></li> <li>Run tests:    <pre><code>flutter test\n</code></pre></li> <li>Commit with a descriptive message:    <pre><code>git commit -m \"Add feature description\"\n</code></pre></li> <li>Push and open a Pull Request against <code>main</code></li> </ol>"},{"location":"contributing/#code-standards","title":"Code Standards","text":""},{"location":"contributing/#dart-flutter","title":"Dart / Flutter","text":"<ul> <li>Follow the Dart style guide</li> <li>Use <code>flutter_lints</code> rules (configured in <code>analysis_options.yaml</code>)</li> <li>Run <code>flutter analyze</code> before committing \u2014 zero issues required</li> <li>Use <code>AppColors</code> constants, never hardcode color values</li> <li>Use <code>ConsumerWidget</code> for screens that access Riverpod providers</li> </ul>"},{"location":"contributing/#go-api-server","title":"Go (API Server)","text":"<ul> <li>Follow standard Go formatting (<code>gofmt</code>)</li> <li>Keep the API server in a single <code>main.go</code> file</li> <li>Validate all file paths to prevent directory traversal</li> <li>Return errors in <code>{\"error\": \"message\"}</code> format</li> </ul>"},{"location":"contributing/#documentation","title":"Documentation","text":"<ul> <li>Documentation uses MkDocs with Material theme</li> <li>Markdown files live in <code>docs/</code></li> <li>Preview locally with <code>mkdocs serve</code></li> <li>Build check with <code>mkdocs build --strict</code></li> </ul>"},{"location":"contributing/#pull-request-process","title":"Pull Request Process","text":"<ol> <li>Ensure <code>flutter analyze</code> passes with zero issues</li> <li>Ensure <code>flutter test</code> passes</li> <li>Update documentation if adding new features or changing behavior</li> <li>Keep PRs focused \u2014 one feature or fix per PR</li> <li>Write a clear PR description explaining what and why</li> </ol>"},{"location":"contributing/#commit-convention","title":"Commit Convention","text":"<p>Use clear, descriptive commit messages:</p> <pre><code>Add compliance framework scoring to dashboard\nFix scan service selector config path switching\nUpdate Docker image to include Terraform 1.7.5\n</code></pre> <p>Prefix with the action: <code>Add</code>, <code>Fix</code>, <code>Update</code>, <code>Remove</code>, <code>Refactor</code>.</p>"},{"location":"contributing/#project-structure","title":"Project Structure","text":"<p>See Project Structure for a guide to the codebase layout.</p>"},{"location":"contributing/#reporting-issues","title":"Reporting Issues","text":"<p>Open an issue on GitHub with:</p> <ul> <li>Steps to reproduce</li> <li>Expected vs actual behavior</li> <li>Flutter/OS version (<code>flutter doctor</code> output)</li> <li>Screenshots if applicable</li> </ul>"},{"location":"contributing/#license","title":"License","text":"<p>By contributing, you agree that your contributions will be licensed under the project's MIT License.</p>"},{"location":"api/config-endpoints/","title":"Config Endpoints","text":""},{"location":"api/config-endpoints/#get-apiconfig","title":"GET /api/config","text":"<p>Read a cloudrift YAML configuration file.</p>"},{"location":"api/config-endpoints/#request","title":"Request","text":"<pre><code>curl \"http://localhost:8080/api/config?path=/etc/cloudrift/config/cloudrift-s3.yml\"\n</code></pre> <p>Query Parameters:</p> Parameter Type Required Description <code>path</code> string yes Absolute path to the config file"},{"location":"api/config-endpoints/#response-200","title":"Response (200)","text":"<p>Returns the raw YAML content as <code>text/plain</code>:</p> <pre><code>aws_profile: default\nregion: us-east-1\nplan_path: ./examples/terraform-plan.json\n</code></pre>"},{"location":"api/config-endpoints/#error-response-400","title":"Error Response (400)","text":"<pre><code>{\n  \"error\": \"path parameter is required\"\n}\n</code></pre>"},{"location":"api/config-endpoints/#error-response-404","title":"Error Response (404)","text":"<pre><code>{\n  \"error\": \"config file not found\"\n}\n</code></pre>"},{"location":"api/config-endpoints/#put-apiconfig","title":"PUT /api/config","text":"<p>Write a cloudrift YAML configuration file.</p>"},{"location":"api/config-endpoints/#request_1","title":"Request","text":"<pre><code>curl -X PUT \"http://localhost:8080/api/config?path=/etc/cloudrift/config/cloudrift-s3.yml\" \\\n  -d 'aws_profile: production\nregion: eu-west-1\nplan_path: /etc/cloudrift/examples/terraform-plan.json'\n</code></pre> <p>Query Parameters:</p> Parameter Type Required Description <code>path</code> string yes Absolute path to write the config file <p>Body: Raw YAML content (Content-Type is not enforced).</p>"},{"location":"api/config-endpoints/#response-200_1","title":"Response (200)","text":"<pre><code>{\n  \"status\": \"ok\"\n}\n</code></pre>"},{"location":"api/config-endpoints/#error-response-400_1","title":"Error Response (400)","text":"<pre><code>{\n  \"error\": \"path contains invalid characters\"\n}\n</code></pre> <p>Path validation</p> <p>Paths containing <code>..</code> are rejected to prevent directory traversal attacks.</p>"},{"location":"api/file-endpoints/","title":"File Endpoints","text":""},{"location":"api/file-endpoints/#get-apifilesplan","title":"GET /api/files/plan","text":"<p>Read a Terraform plan JSON file.</p>"},{"location":"api/file-endpoints/#request","title":"Request","text":"<pre><code>curl \"http://localhost:8080/api/files/plan?path=/etc/cloudrift/examples/terraform-plan.json\"\n</code></pre> <p>Query Parameters:</p> Parameter Type Required Description <code>path</code> string yes Path to the plan JSON file"},{"location":"api/file-endpoints/#response-200","title":"Response (200)","text":"<p>Returns the JSON file content with <code>Content-Type: application/json</code>.</p>"},{"location":"api/file-endpoints/#put-apifilesplan","title":"PUT /api/files/plan","text":"<p>Write a Terraform plan JSON file.</p>"},{"location":"api/file-endpoints/#request_1","title":"Request","text":"<pre><code>curl -X PUT \"http://localhost:8080/api/files/plan?path=/etc/cloudrift/examples/my-plan.json\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"format_version\":\"1.2\",\"terraform_version\":\"1.7.5\",\"planned_values\":{}}'\n</code></pre> <p>Query Parameters:</p> Parameter Type Required Description <code>path</code> string yes Path to write the plan JSON file <p>Body: Valid JSON content.</p>"},{"location":"api/file-endpoints/#response-200_1","title":"Response (200)","text":"<pre><code>{\n  \"status\": \"ok\"\n}\n</code></pre>"},{"location":"api/file-endpoints/#get-apifileslist","title":"GET /api/files/list","text":"<p>List available config and plan files.</p>"},{"location":"api/file-endpoints/#request_2","title":"Request","text":"<pre><code>curl http://localhost:8080/api/files/list\n</code></pre>"},{"location":"api/file-endpoints/#response-200_2","title":"Response (200)","text":"<pre><code>{\n  \"configs\": [\n    \"/etc/cloudrift/config/cloudrift-s3.yml\",\n    \"/etc/cloudrift/config/cloudrift-ec2.yml\"\n  ],\n  \"plans\": [\n    \"/etc/cloudrift/examples/terraform-plan.json\",\n    \"/etc/cloudrift/examples/ec2-plan.json\"\n  ]\n}\n</code></pre> <p>Searches the config and examples directories for <code>.yml</code>/<code>.yaml</code> and <code>.json</code> files.</p>"},{"location":"api/file-endpoints/#post-apifilesupload","title":"POST /api/files/upload","text":"<p>Upload a Terraform plan JSON file via multipart form.</p>"},{"location":"api/file-endpoints/#request_3","title":"Request","text":"<pre><code>curl -X POST http://localhost:8080/api/files/upload \\\n  -F \"file=@plan.json\"\n</code></pre> <p>Multipart Fields:</p> Field Type Required Description <code>file</code> file yes JSON plan file to upload"},{"location":"api/file-endpoints/#response-200_3","title":"Response (200)","text":"<pre><code>{\n  \"status\": \"ok\",\n  \"path\": \"/etc/cloudrift/examples/plan.json\",\n  \"name\": \"plan.json\"\n}\n</code></pre> <p>The file is saved to the examples directory with its original filename.</p>"},{"location":"api/file-endpoints/#post-apifilesgenerate-plan","title":"POST /api/files/generate-plan","text":"<p>Generate a Terraform plan JSON file from form-submitted resource data.</p>"},{"location":"api/file-endpoints/#request_4","title":"Request","text":"<pre><code>curl -X POST http://localhost:8080/api/files/generate-plan \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"service\": \"s3\",\n    \"plan\": {\n      \"resource_type\": \"aws_s3_bucket\",\n      \"resource_name\": \"my-bucket\",\n      \"attributes\": {\n        \"bucket\": \"my-bucket\",\n        \"acl\": \"private\",\n        \"versioning\": { \"enabled\": true },\n        \"server_side_encryption_configuration\": {\n          \"rule\": {\n            \"apply_server_side_encryption_by_default\": {\n              \"sse_algorithm\": \"aws:kms\"\n            }\n          }\n        }\n      }\n    }\n  }'\n</code></pre> <p>Body Parameters:</p> Field Type Required Description <code>service</code> string yes AWS service type <code>plan</code> object yes Resource definition with type, name, and attributes"},{"location":"api/file-endpoints/#response-200_4","title":"Response (200)","text":"<pre><code>{\n  \"status\": \"ok\",\n  \"plan_path\": \"/etc/cloudrift/examples/generated-plan.json\",\n  \"config\": \"/etc/cloudrift/config/cloudrift-s3.yml\"\n}\n</code></pre> <p>Generates a valid Terraform plan JSON structure and updates the config file to reference it.</p>"},{"location":"api/overview/","title":"API Overview","text":"<p>The Cloudrift API server is a Go HTTP server that wraps the CLI binary, providing REST endpoints for the web UI. It runs on port <code>8081</code> (configurable via <code>API_PORT</code> environment variable) and is reverse-proxied by nginx at <code>/api/*</code>.</p>"},{"location":"api/overview/#endpoint-summary","title":"Endpoint Summary","text":"Endpoint Method Category Description <code>/api/health</code> GET Core Check CLI availability <code>/api/version</code> GET Core Get CLI version string <code>/api/scan</code> POST Scan Run infrastructure scan <code>/api/config</code> GET Config Read config YAML file <code>/api/config</code> PUT Config Write config YAML file <code>/api/files/plan</code> GET Files Read plan JSON file <code>/api/files/plan</code> PUT Files Write plan JSON file <code>/api/files/list</code> GET Files List config and plan files <code>/api/files/upload</code> POST Files Upload plan JSON file <code>/api/files/generate-plan</code> POST Files Generate plan from form data <code>/api/terraform/status</code> GET Terraform Check Terraform availability <code>/api/terraform/upload</code> POST Terraform Upload .tf/.tfvars files <code>/api/terraform/plan</code> POST Terraform Start async terraform plan <code>/api/terraform/job</code> GET Terraform Poll job status"},{"location":"api/overview/#cors","title":"CORS","text":"<p>The API server enables CORS for all origins in development:</p> <ul> <li><code>Access-Control-Allow-Origin: *</code></li> <li><code>Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS</code></li> <li><code>Access-Control-Allow-Headers: Content-Type</code></li> </ul> <p>All <code>OPTIONS</code> preflight requests return <code>204 No Content</code>.</p>"},{"location":"api/overview/#path-security","title":"Path Security","text":"<p>File operation endpoints validate paths to prevent directory traversal:</p> <ul> <li>Paths are sanitized using <code>filepath.Clean</code></li> <li>Paths containing <code>..</code> are rejected with <code>400 Bad Request</code></li> <li>File operations are restricted to the config and working directories</li> </ul>"},{"location":"api/overview/#error-responses","title":"Error Responses","text":"<p>All endpoints return errors in a consistent format:</p> <pre><code>{\n  \"error\": \"Human-readable error description\"\n}\n</code></pre> <p>HTTP status codes:</p> Code Meaning <code>200</code> Success <code>400</code> Bad request (invalid parameters) <code>404</code> Resource not found <code>405</code> Method not allowed <code>500</code> Internal server error"},{"location":"api/overview/#architecture","title":"Architecture","text":"<pre><code>flowchart LR\n    Browser --&gt; |:80| Nginx\n    Nginx --&gt; |/api/*| GoAPI[:8081]\n    Nginx --&gt; |/*| Flutter[Static Files]\n    GoAPI --&gt; CLI[cloudrift binary]\n    GoAPI --&gt; Terraform[terraform binary]</code></pre> <p>Nginx handles static file serving for the Flutter web app and reverse-proxies all <code>/api/*</code> requests to the Go server on port 8081. The Go server executes CLI and Terraform commands as subprocesses.</p>"},{"location":"api/scan-endpoints/","title":"Scan Endpoints","text":""},{"location":"api/scan-endpoints/#post-apiscan","title":"POST /api/scan","text":"<p>Run an infrastructure drift scan.</p>"},{"location":"api/scan-endpoints/#request","title":"Request","text":"<pre><code>curl -X POST http://localhost:8080/api/scan \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"service\": \"s3\",\n    \"config_path\": \"/etc/cloudrift/config/cloudrift-s3.yml\"\n  }'\n</code></pre> <p>Body Parameters:</p> Field Type Required Description <code>service</code> string yes AWS service to scan (<code>s3</code>, <code>ec2</code>) <code>config_path</code> string yes Path to cloudrift YAML config file <code>policy_dir</code> string no Custom OPA policy directory <code>skip_policies</code> bool no Skip policy evaluation"},{"location":"api/scan-endpoints/#response-200","title":"Response (200)","text":"<pre><code>{\n  \"scan_summary\": {\n    \"service\": \"s3\",\n    \"total_resources\": 5,\n    \"drifted_resources\": 2,\n    \"total_violations\": 8,\n    \"scan_duration_ms\": 1234\n  },\n  \"resources\": [\n    {\n      \"resource_type\": \"aws_s3_bucket\",\n      \"resource_name\": \"my-bucket\",\n      \"drift\": {\n        \"added\": [],\n        \"removed\": [],\n        \"changed\": [\n          {\n            \"attribute\": \"versioning.enabled\",\n            \"expected\": \"true\",\n            \"actual\": \"false\"\n          }\n        ]\n      },\n      \"violations\": [\n        {\n          \"policy_id\": \"S3-001\",\n          \"policy_name\": \"S3 Encryption Required\",\n          \"severity\": \"HIGH\",\n          \"message\": \"S3 bucket must have server-side encryption enabled\"\n        }\n      ]\n    }\n  ],\n  \"compliance\": {\n    \"hipaa\": { \"score\": 85.0, \"passing\": 19, \"total\": 22 },\n    \"gdpr\": { \"score\": 90.0, \"passing\": 15, \"total\": 17 },\n    \"iso_27001\": { \"score\": 78.0, \"passing\": 25, \"total\": 32 },\n    \"pci_dss\": { \"score\": 82.0, \"passing\": 28, \"total\": 34 },\n    \"soc2\": { \"score\": 75.0, \"passing\": 37, \"total\": 49 }\n  }\n}\n</code></pre>"},{"location":"api/scan-endpoints/#error-response-400500","title":"Error Response (400/500)","text":"<pre><code>{\n  \"error\": \"Scan failed (exit code 1): config file not found\"\n}\n</code></pre>"},{"location":"api/scan-endpoints/#get-apihealth","title":"GET /api/health","text":"<p>Check if the Cloudrift CLI binary is available.</p>"},{"location":"api/scan-endpoints/#request_1","title":"Request","text":"<pre><code>curl http://localhost:8080/api/health\n</code></pre>"},{"location":"api/scan-endpoints/#response-200_1","title":"Response (200)","text":"<pre><code>{\n  \"available\": true\n}\n</code></pre> <p>If the CLI binary is not found or not executable, <code>available</code> will be <code>false</code>.</p>"},{"location":"api/scan-endpoints/#get-apiversion","title":"GET /api/version","text":"<p>Get the Cloudrift CLI version string.</p>"},{"location":"api/scan-endpoints/#request_2","title":"Request","text":"<pre><code>curl http://localhost:8080/api/version\n</code></pre>"},{"location":"api/scan-endpoints/#response-200_2","title":"Response (200)","text":"<pre><code>{\n  \"version\": \"cloudrift v1.0.0\"\n}\n</code></pre> <p>Returns the output of <code>cloudrift --version</code>.</p>"},{"location":"api/terraform-endpoints/","title":"Terraform Endpoints","text":"<p>The Terraform endpoints support the Resource Builder's Terraform mode. They handle file uploads, async plan execution, and job polling.</p>"},{"location":"api/terraform-endpoints/#get-apiterraformstatus","title":"GET /api/terraform/status","text":"<p>Check if Terraform is installed and available.</p>"},{"location":"api/terraform-endpoints/#request","title":"Request","text":"<pre><code>curl http://localhost:8080/api/terraform/status\n</code></pre>"},{"location":"api/terraform-endpoints/#response-200","title":"Response (200)","text":"<pre><code>{\n  \"available\": true,\n  \"version\": \"Terraform v1.7.5\",\n  \"tf_files\": [\"main.tf\", \"variables.tf\"],\n  \"has_files\": true,\n  \"initialized\": false,\n  \"tf_dir\": \"/etc/cloudrift/terraform\"\n}\n</code></pre> <p>Fields:</p> Field Type Description <code>available</code> bool Terraform binary found on <code>$PATH</code> <code>version</code> string Terraform version string <code>tf_files</code> string[] List of <code>.tf</code> files in the terraform directory <code>has_files</code> bool Whether any <code>.tf</code> files exist <code>initialized</code> bool Whether <code>terraform init</code> has been run (<code>.terraform</code> dir exists) <code>tf_dir</code> string Path to the terraform working directory"},{"location":"api/terraform-endpoints/#post-apiterraformupload","title":"POST /api/terraform/upload","text":"<p>Upload <code>.tf</code> and <code>.tfvars</code> files for Terraform operations.</p>"},{"location":"api/terraform-endpoints/#request_1","title":"Request","text":"<pre><code>curl -X POST http://localhost:8080/api/terraform/upload \\\n  -F \"files=@main.tf\" \\\n  -F \"files=@variables.tf\" \\\n  -F \"files=@terraform.tfvars\"\n</code></pre> <p>Multipart Fields:</p> Field Type Required Description <code>files</code> file[] yes One or more <code>.tf</code> or <code>.tfvars</code> files"},{"location":"api/terraform-endpoints/#response-200_1","title":"Response (200)","text":"<pre><code>{\n  \"status\": \"ok\",\n  \"uploaded\": [\"main.tf\", \"variables.tf\", \"terraform.tfvars\"],\n  \"tf_dir\": \"/etc/cloudrift/terraform\"\n}\n</code></pre> <p>Files are saved to the Terraform working directory, overwriting any existing files with the same name.</p>"},{"location":"api/terraform-endpoints/#post-apiterraformplan","title":"POST /api/terraform/plan","text":"<p>Start an asynchronous Terraform plan operation. This runs three phases sequentially:</p> <pre><code>flowchart LR\n    A[terraform init] --&gt; B[terraform plan]\n    B --&gt; C[terraform show -json]\n    C --&gt; D[Plan JSON saved]</code></pre>"},{"location":"api/terraform-endpoints/#request_2","title":"Request","text":"<pre><code>curl -X POST http://localhost:8080/api/terraform/plan\n</code></pre> <p>No request body required. Uses the files previously uploaded to the Terraform directory.</p>"},{"location":"api/terraform-endpoints/#response-200_2","title":"Response (200)","text":"<pre><code>{\n  \"status\": \"started\",\n  \"job_id\": \"abc123-def456\"\n}\n</code></pre> <p>The job runs in the background. Use the job ID to poll for status.</p>"},{"location":"api/terraform-endpoints/#pipeline-phases","title":"Pipeline Phases","text":"Phase Command Timeout Description <code>init</code> <code>terraform init</code> 10 min Download providers, initialize backend <code>plan</code> <code>terraform plan -out=tfplan</code> 10 min Generate execution plan <code>show</code> <code>terraform show -json tfplan</code> 5 min Convert to JSON format <p>Each phase must complete before the next starts. If any phase fails, the job is marked as failed with the error message.</p>"},{"location":"api/terraform-endpoints/#get-apiterraformjob","title":"GET /api/terraform/job","text":"<p>Poll the status of a running Terraform plan job.</p>"},{"location":"api/terraform-endpoints/#request_3","title":"Request","text":"<pre><code>curl \"http://localhost:8080/api/terraform/job?id=abc123-def456\"\n</code></pre> <p>Query Parameters:</p> Parameter Type Required Description <code>id</code> string yes Job ID from the plan response"},{"location":"api/terraform-endpoints/#response-running","title":"Response \u2014 Running","text":"<pre><code>{\n  \"id\": \"abc123-def456\",\n  \"status\": \"running\",\n  \"phase\": \"plan\",\n  \"error\": \"\",\n  \"plan_path\": \"\",\n  \"elapsed_s\": 15.2,\n  \"output\": \"Initializing provider plugins...\\nTerraform has been successfully initialized!\\nPlanning...\"\n}\n</code></pre>"},{"location":"api/terraform-endpoints/#response-completed","title":"Response \u2014 Completed","text":"<pre><code>{\n  \"id\": \"abc123-def456\",\n  \"status\": \"completed\",\n  \"phase\": \"show\",\n  \"error\": \"\",\n  \"plan_path\": \"/etc/cloudrift/examples/terraform-plan.json\",\n  \"elapsed_s\": 42.5,\n  \"output\": \"...plan output...\"\n}\n</code></pre>"},{"location":"api/terraform-endpoints/#response-failed","title":"Response \u2014 Failed","text":"<pre><code>{\n  \"id\": \"abc123-def456\",\n  \"status\": \"failed\",\n  \"phase\": \"init\",\n  \"error\": \"Error: Failed to install provider\",\n  \"plan_path\": \"\",\n  \"elapsed_s\": 8.1,\n  \"output\": \"Initializing provider plugins...\\nError: Failed to install provider\"\n}\n</code></pre> <p>Job Status Values:</p> Status Meaning <code>running</code> Job is currently executing <code>completed</code> All phases finished successfully <code>failed</code> A phase failed with an error"},{"location":"api/terraform-endpoints/#job-cleanup","title":"Job Cleanup","text":"<p>Completed and failed jobs are automatically cleaned up after 1 hour. The cleanup runs every 10 minutes.</p>"},{"location":"api/terraform-endpoints/#typical-workflow","title":"Typical Workflow","text":"<pre><code># 1. Check Terraform is available\ncurl http://localhost:8080/api/terraform/status\n\n# 2. Upload Terraform files\ncurl -X POST http://localhost:8080/api/terraform/upload \\\n  -F \"files=@main.tf\" -F \"files=@variables.tf\"\n\n# 3. Start the plan\nJOB_ID=$(curl -s -X POST http://localhost:8080/api/terraform/plan | jq -r '.job_id')\n\n# 4. Poll until complete\nwhile true; do\n  STATUS=$(curl -s \"http://localhost:8080/api/terraform/job?id=$JOB_ID\")\n  echo \"$STATUS\" | jq '.status, .phase'\n  [ \"$(echo $STATUS | jq -r '.status')\" != \"running\" ] &amp;&amp; break\n  sleep 2\ndone\n\n# 5. Use the generated plan for scanning\nPLAN_PATH=$(echo $STATUS | jq -r '.plan_path')\ncurl -X POST http://localhost:8080/api/scan \\\n  -H \"Content-Type: application/json\" \\\n  -d \"{\\\"service\\\":\\\"s3\\\",\\\"config_path\\\":\\\"/etc/cloudrift/config/cloudrift-s3.yml\\\"}\"\n</code></pre>"},{"location":"architecture/data-flow/","title":"Data Flow","text":"<p>Cloudrift has two distinct data flow paths depending on whether it's running as a desktop app or in Docker.</p>"},{"location":"architecture/data-flow/#desktop-data-flow","title":"Desktop Data Flow","text":"<pre><code>sequenceDiagram\n    participant UI as Flutter UI\n    participant DS as CliDatasource\n    participant CLI as cloudrift binary\n    participant AWS as AWS APIs\n\n    UI-&gt;&gt;DS: runScan(service, config)\n    DS-&gt;&gt;CLI: Process.run(\"cloudrift scan --format=json\")\n    CLI-&gt;&gt;AWS: DescribeInstances / ListBuckets\n    AWS--&gt;&gt;CLI: Resource data\n    CLI--&gt;&gt;DS: JSON stdout\n    DS--&gt;&gt;UI: ScanResult\n    UI-&gt;&gt;UI: Update providers &amp; render</code></pre> <p>Desktop path details:</p> <ol> <li>User clicks \"Run Scan\" on the Scan screen</li> <li><code>ScanNotifier</code> calls <code>ScanRepository.runScan()</code></li> <li><code>ScanRepository</code> calls <code>CliDatasource.runScan()</code></li> <li><code>CliDatasource._runScanDesktop()</code> invokes <code>Process.run</code> with the CLI binary</li> <li>CLI args: <code>scan --config=&lt;path&gt; --service=&lt;svc&gt; --format=json --no-emoji</code></li> <li>Working directory is set to the CLI repo folder</li> <li>CLI queries AWS APIs and evaluates OPA policies</li> <li>JSON output is parsed from stdout using <code>_extractJson()</code></li> <li><code>ScanResult.fromJson()</code> deserializes the response</li> <li><code>ScanNotifier</code> updates state \u2192 all dependent providers recompute</li> </ol>"},{"location":"architecture/data-flow/#web-data-flow","title":"Web Data Flow","text":"<pre><code>sequenceDiagram\n    participant Browser as Flutter Web\n    participant Nginx as nginx :80\n    participant API as Go API :8081\n    participant CLI as cloudrift binary\n    participant AWS as AWS APIs\n\n    Browser-&gt;&gt;Nginx: POST /api/scan\n    Nginx-&gt;&gt;API: Proxy to :8081\n    API-&gt;&gt;CLI: exec.Command(\"cloudrift scan\")\n    CLI-&gt;&gt;AWS: DescribeInstances / ListBuckets\n    AWS--&gt;&gt;CLI: Resource data\n    CLI--&gt;&gt;API: JSON stdout\n    API--&gt;&gt;Nginx: JSON response\n    Nginx--&gt;&gt;Browser: JSON response\n    Browser-&gt;&gt;Browser: Update providers &amp; render</code></pre> <p>Web path details:</p> <ol> <li>Same UI trigger, but <code>kIsWeb</code> is <code>true</code></li> <li><code>CliDatasource._runScanWeb()</code> sends HTTP POST to <code>/api/scan</code></li> <li>nginx proxies the request to the Go API on port 8081</li> <li>Go API executes the CLI binary as a subprocess</li> <li>CLI output is captured and returned as JSON</li> <li>Response flows back through nginx to the browser</li> <li>Same <code>ScanResult.fromJson()</code> deserialization</li> </ol>"},{"location":"architecture/data-flow/#terraform-data-flow-web-only","title":"Terraform Data Flow (Web Only)","text":"<pre><code>sequenceDiagram\n    participant Browser as Flutter Web\n    participant API as Go API\n    participant TF as Terraform\n\n    Browser-&gt;&gt;API: POST /api/terraform/upload (files)\n    API--&gt;&gt;Browser: {uploaded: [...]}\n\n    Browser-&gt;&gt;API: POST /api/terraform/plan\n    API--&gt;&gt;Browser: {job_id: \"abc123\"}\n\n    loop Poll every 2s\n        Browser-&gt;&gt;API: GET /api/terraform/job?id=abc123\n        API--&gt;&gt;Browser: {status: \"running\", phase: \"init\"}\n    end\n\n    API-&gt;&gt;TF: terraform init\n    TF--&gt;&gt;API: Success\n    API-&gt;&gt;TF: terraform plan -out=tfplan\n    TF--&gt;&gt;API: Success\n    API-&gt;&gt;TF: terraform show -json tfplan\n    TF--&gt;&gt;API: Plan JSON\n\n    Browser-&gt;&gt;API: GET /api/terraform/job?id=abc123\n    API--&gt;&gt;Browser: {status: \"completed\", plan_path: \"...\"}</code></pre>"},{"location":"architecture/data-flow/#state-flow","title":"State Flow","text":"<pre><code>graph LR\n    ScanNotifier --&gt;|invalidates| ScanHistory\n    ScanHistory --&gt;|watched by| LatestResult\n    LatestResult --&gt;|watched by| ResourceSummaries\n    LatestResult --&gt;|watched by| ComplianceScore\n    ResourceSummaries --&gt;|renders| Dashboard\n    ComplianceScore --&gt;|renders| Dashboard\n    ResourceSummaries --&gt;|renders| Resources\n    ComplianceScore --&gt;|renders| Compliance</code></pre> <p>All derived providers use Riverpod's <code>watch</code> mechanism. When <code>ScanNotifier</code> completes a scan, it invalidates <code>scanHistoryProvider</code>, which triggers a cascade of recomputations through all dependent providers. The UI rebuilds automatically.</p>"},{"location":"architecture/deployment/","title":"Deployment","text":""},{"location":"architecture/deployment/#docker-deployment","title":"Docker Deployment","text":"<p>The Docker image uses a 4-stage multi-stage build to produce a minimal runtime container.</p>"},{"location":"architecture/deployment/#build-stages","title":"Build Stages","text":"<pre><code>graph LR\n    S1[\"Stage 1&lt;br/&gt;golang:1.24&lt;br/&gt;CLI Build\"] --&gt; S4\n    S2[\"Stage 2&lt;br/&gt;golang:1.24&lt;br/&gt;API Build\"] --&gt; S4\n    S3[\"Stage 3&lt;br/&gt;flutter:stable&lt;br/&gt;Web Build\"] --&gt; S4\n    S4[\"Stage 4&lt;br/&gt;nginx:alpine&lt;br/&gt;Runtime\"]</code></pre>"},{"location":"architecture/deployment/#stage-1-cli-build-cli-build","title":"Stage 1: CLI Build (<code>cli-build</code>)","text":"<pre><code>FROM golang:1.24 AS cli-build\n# Clones the Cloudrift CLI repository\n# Cross-compiles with CGO_ENABLED=0 GOOS=linux\n# Output: /cli/cloudrift\n</code></pre> <p>Produces a statically-linked Linux binary of the Cloudrift CLI.</p>"},{"location":"architecture/deployment/#stage-2-api-server-build-api-build","title":"Stage 2: API Server Build (<code>api-build</code>)","text":"<pre><code>FROM golang:1.24 AS api-build\n# Copies server/go.mod and server/main.go\n# Compiles with CGO_ENABLED=0 GOOS=linux\n# Output: /api/cloudrift-api\n</code></pre> <p>Produces the Go REST API server binary.</p>"},{"location":"architecture/deployment/#stage-3-flutter-web-build-web-build","title":"Stage 3: Flutter Web Build (<code>web-build</code>)","text":"<pre><code>FROM ghcr.io/cirruslabs/flutter:stable AS web-build\n# Runs flutter pub get\n# Builds with flutter build web --release\n# Output: /app/build/web/\n</code></pre> <p>Produces optimized static web files (HTML, JS, CSS, assets).</p>"},{"location":"architecture/deployment/#stage-4-runtime","title":"Stage 4: Runtime","text":"<pre><code>FROM nginx:alpine\n# Installs: supervisor, wget, unzip\n# Downloads Terraform 1.7.5\n# Copies binaries and configs from previous stages\n</code></pre> <p>The final image contains:</p> Component Location CLI binary <code>/usr/local/bin/cloudrift</code> API server <code>/usr/local/bin/cloudrift-api</code> Flutter web <code>/usr/share/nginx/html</code> Terraform <code>/usr/local/bin/terraform</code> nginx config <code>/etc/nginx/conf.d/default.conf</code> supervisord <code>/etc/supervisord.conf</code> Default configs <code>/etc/cloudrift/config/</code> Example plans <code>/etc/cloudrift/examples/</code>"},{"location":"architecture/deployment/#process-management","title":"Process Management","text":"<p><code>supervisord</code> runs three processes:</p> Process Command Port nginx <code>nginx -g 'daemon off;'</code> 80 cloudrift-api <code>cloudrift-api</code> 8081"},{"location":"architecture/deployment/#nginx-configuration","title":"nginx Configuration","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                nginx :80                 \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  /api/*    \u2192 proxy to :8081 (Go API)    \u2502\n\u2502  /*        \u2192 /usr/share/nginx/html      \u2502\n\u2502            \u2192 fallback to index.html     \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  gzip: text, css, json, js             \u2502\n\u2502  no-cache: index.html, service_worker  \u2502\n\u2502  proxy_read_timeout: 300s              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"architecture/deployment/#environment-variables","title":"Environment Variables","text":"Variable Default Description <code>API_PORT</code> <code>8081</code> Go API server listen port <code>TF_PLUGIN_CACHE_DIR</code> <code>/var/cache/terraform-plugins</code> Terraform provider cache"},{"location":"architecture/deployment/#building-the-image","title":"Building the Image","text":"<pre><code>docker build -t cloudrift-ui .\n</code></pre>"},{"location":"architecture/deployment/#running","title":"Running","text":"<pre><code>docker run -p 8080:80 \\\n  -v ~/.aws:/root/.aws:ro \\\n  cloudrift-ui\n</code></pre>"},{"location":"architecture/deployment/#docker-hub","title":"Docker Hub","text":"<pre><code>docker pull inayathulla/cloudrift-ui:latest\n</code></pre>"},{"location":"architecture/deployment/#desktop-deployment","title":"Desktop Deployment","text":"<p>The macOS desktop app is built with Flutter:</p> <pre><code>flutter build macos --release\n</code></pre> <p>Output: <code>build/macos/Build/Products/Release/cloudrift_ui.app</code> (~44 MB)</p>"},{"location":"architecture/deployment/#requirements","title":"Requirements","text":"<ul> <li>macOS 13+ (Ventura or later)</li> <li>Cloudrift CLI binary installed and accessible</li> <li>AWS credentials configured (<code>~/.aws/credentials</code>)</li> <li>Xcode 15+ (for building from source)</li> </ul>"},{"location":"architecture/deployment/#github-pages-documentation","title":"GitHub Pages (Documentation)","text":"<p>The documentation site is deployed via GitHub Actions:</p> <pre><code>on:\n  push:\n    branches: [main]\n    paths: ['docs/**', 'mkdocs.yml']\n</code></pre> <p>The workflow builds with <code>mkdocs build --strict</code> and deploys to the <code>gh-pages</code> branch using <code>mkdocs gh-deploy</code>.</p>"},{"location":"architecture/overview/","title":"Architecture Overview","text":"<p>Cloudrift UI follows Clean Architecture principles with a clear separation between data, domain, and presentation layers.</p>"},{"location":"architecture/overview/#layer-diagram","title":"Layer Diagram","text":"<pre><code>graph TB\n    subgraph Presentation[\"Presentation Layer\"]\n        Screens[Screens]\n        Shell[App Shell]\n        Router[Go Router]\n        Widgets[Shared Widgets]\n    end\n\n    subgraph Providers[\"State Management\"]\n        ScanNotifier[Scan Notifier]\n        DerivedProviders[Derived Providers]\n    end\n\n    subgraph Data[\"Data Layer\"]\n        CLI[CLI Datasource]\n        Config[Config Datasource]\n        Storage[Local Storage]\n    end\n\n    subgraph External[\"External\"]\n        Binary[Cloudrift CLI Binary]\n        AWS[AWS APIs]\n        GoAPI[Go API Server]\n        Hive[Hive DB]\n    end\n\n    Screens --&gt; Providers\n    Shell --&gt; Router\n    Providers --&gt; Data\n    CLI --&gt; Binary\n    CLI --&gt; GoAPI\n    Binary --&gt; AWS\n    Config --&gt; GoAPI\n    Storage --&gt; Hive</code></pre>"},{"location":"architecture/overview/#tech-stack","title":"Tech Stack","text":"Layer Technology Purpose Framework Flutter 3.24+ Cross-platform UI (macOS + Web) State Riverpod 2.6 Reactive state management Routing GoRouter 14.8 Declarative navigation with ShellRoute Charts fl_chart 0.70 Line charts, pie/donut charts, bar charts Typography Google Fonts Inter (text) + JetBrains Mono (code) Storage Hive 2.2 NoSQL local storage for scan history HTTP http 1.2 REST client for web mode CLI Go 1.24 Infrastructure scanning engine API Server Go net/http REST API wrapping CLI Web Server nginx alpine Static serving + reverse proxy IaC Terraform 1.7.5 Plan generation in Docker Process Mgr supervisord Multi-process container management"},{"location":"architecture/overview/#key-design-decisions","title":"Key Design Decisions","text":""},{"location":"architecture/overview/#dual-mode-architecture","title":"Dual-Mode Architecture","text":"<p>The same Flutter codebase runs as both a native macOS app and a web app:</p> <ul> <li>Desktop: Calls the CLI binary directly via <code>dart:io</code> <code>Process.run</code></li> <li>Web: Calls the Go API server via <code>package:http</code> HTTP requests</li> </ul> <p>The <code>CliDatasource</code> class abstracts this difference \u2014 it checks <code>kIsWeb</code> at runtime and routes to the appropriate implementation.</p>"},{"location":"architecture/overview/#shellroute-pattern","title":"ShellRoute Pattern","text":"<p>All screens share a persistent navigation sidebar via GoRouter's <code>ShellRoute</code>. The <code>AppShell</code> widget wraps every screen, providing:</p> <ul> <li>Navigation rail with 8 destinations</li> <li>Color-coded icons per section</li> <li>Active route highlighting</li> <li>Responsive layout</li> </ul>"},{"location":"architecture/overview/#scan-history","title":"Scan History","text":"<p>Scan results are persisted to Hive local storage, enabling:</p> <ul> <li>Dashboard trend charts across multiple scans</li> <li>Resource comparison between scans</li> <li>Offline access to previous results</li> </ul>"},{"location":"architecture/overview/#opa-policy-engine","title":"OPA Policy Engine","text":"<p>The 49 security policies are evaluated by the Go CLI using the Open Policy Agent (OPA) library. Policy results are returned as part of the scan JSON and displayed in the UI.</p>"},{"location":"architecture/state-management/","title":"State Management","text":"<p>Cloudrift uses Riverpod for reactive state management. Providers form a dependency graph where changes propagate automatically from data sources to UI widgets.</p>"},{"location":"architecture/state-management/#provider-dependency-graph","title":"Provider Dependency Graph","text":"<pre><code>graph TB\n    subgraph Datasources[\"Datasource Providers\"]\n        localStorage[\"localStorageProvider&lt;br/&gt;(Hive)\"]\n        cliDS[\"cliDatasourceProvider&lt;br/&gt;(CLI / HTTP)\"]\n        configDS[\"configDatasourceProvider&lt;br/&gt;(YAML / HTTP)\"]\n    end\n\n    subgraph Repository[\"Repository Layer\"]\n        scanRepo[\"scanRepositoryProvider\"]\n    end\n\n    subgraph Core[\"Core State\"]\n        scanState[\"scanStateProvider&lt;br/&gt;(StateNotifier)\"]\n    end\n\n    subgraph Derived[\"Derived Providers\"]\n        history[\"scanHistoryProvider\"]\n        latest[\"latestScanResultProvider\"]\n        resources[\"resourceSummariesProvider\"]\n        compliance[\"complianceScoreProvider\"]\n        cliAvail[\"cliAvailableProvider\"]\n    end\n\n    cliDS --&gt; scanRepo\n    localStorage --&gt; scanRepo\n    scanRepo --&gt; scanState\n    scanState --&gt;|invalidates| history\n    history --&gt; latest\n    latest --&gt; resources\n    latest --&gt; compliance\n    cliDS --&gt; cliAvail</code></pre>"},{"location":"architecture/state-management/#provider-details","title":"Provider Details","text":""},{"location":"architecture/state-management/#datasource-providers","title":"Datasource Providers","text":"Provider Type Description <code>localStorageProvider</code> <code>Provider</code> Hive-based local storage for scan history <code>cliDatasourceProvider</code> <code>Provider</code> CLI binary execution (desktop) or HTTP client (web) <code>configDatasourceProvider</code> <code>Provider</code> YAML config reader/writer"},{"location":"architecture/state-management/#repository-provider","title":"Repository Provider","text":"Provider Type Description <code>scanRepositoryProvider</code> <code>Provider</code> Orchestrates scan execution, persists results"},{"location":"architecture/state-management/#core-state","title":"Core State","text":"Provider Type Description <code>scanStateProvider</code> <code>StateNotifierProvider&lt;ScanNotifier, ScanState&gt;</code> Manages scan lifecycle: idle \u2192 running \u2192 completed/error <p>ScanState values:</p> <ul> <li><code>ScanState.idle()</code> \u2014 No scan in progress</li> <li><code>ScanState.running()</code> \u2014 Scan is executing</li> <li><code>ScanState.completed(result)</code> \u2014 Scan finished successfully</li> <li><code>ScanState.error(message)</code> \u2014 Scan failed</li> </ul>"},{"location":"architecture/state-management/#derived-providers","title":"Derived Providers","text":"Provider Type Watches Description <code>scanHistoryProvider</code> <code>Provider&lt;List&lt;ScanHistoryEntry&gt;&gt;</code> localStorage All stored scan results <code>latestScanResultProvider</code> <code>Provider&lt;ScanResult?&gt;</code> scanHistory Most recent scan result <code>resourceSummariesProvider</code> <code>Provider&lt;List&lt;ResourceSummary&gt;&gt;</code> latestResult Aggregated resource data with drift + violations <code>complianceScoreProvider</code> <code>Provider&lt;ComplianceScore&gt;</code> latestResult Per-framework compliance percentages <code>cliAvailableProvider</code> <code>FutureProvider&lt;bool&gt;</code> cliDatasource Whether the CLI is reachable"},{"location":"architecture/state-management/#reactivity-model","title":"Reactivity Model","text":"<p>Riverpod providers use a pull-based reactivity model:</p> <ol> <li>A widget calls <code>ref.watch(someProvider)</code> to subscribe</li> <li>When the provider's value changes, the widget rebuilds</li> <li>Derived providers auto-recompute when their dependencies change</li> </ol>"},{"location":"architecture/state-management/#invalidation-flow","title":"Invalidation Flow","text":"<p>When a scan completes:</p> <pre><code>ScanNotifier.completeScan()\n  \u2192 ref.invalidate(scanHistoryProvider)\n    \u2192 scanHistoryProvider recomputes (reads from Hive)\n      \u2192 latestScanResultProvider recomputes\n        \u2192 resourceSummariesProvider recomputes\n        \u2192 complianceScoreProvider recomputes\n          \u2192 Dashboard/Resources/Compliance screens rebuild\n</code></pre>"},{"location":"architecture/state-management/#usage-in-widgets","title":"Usage in Widgets","text":"<pre><code>class DashboardScreen extends ConsumerWidget {\n  @override\n  Widget build(BuildContext context, WidgetRef ref) {\n    final resources = ref.watch(resourceSummariesProvider);\n    final compliance = ref.watch(complianceScoreProvider);\n    final scanState = ref.watch(scanStateProvider);\n\n    // Widgets rebuild automatically when any watched provider changes\n    return Column(\n      children: [\n        KpiCards(resources: resources, compliance: compliance),\n        if (scanState is ScanRunning) const LinearProgressIndicator(),\n      ],\n    );\n  }\n}\n</code></pre>"},{"location":"architecture/state-management/#persistence","title":"Persistence","text":"<p>Scan history is persisted using Hive, a lightweight NoSQL database:</p> <ul> <li>Desktop: Stored in the app's documents directory</li> <li>Web: Stored in IndexedDB via <code>hive_flutter</code></li> </ul> <p>Each scan result is stored as a <code>ScanHistoryEntry</code> containing the full <code>ScanResult</code> JSON and a timestamp. History is loaded on app startup and updated after each scan.</p>"},{"location":"development/adding-screens/","title":"Adding Screens","text":"<p>This guide walks through adding a new screen to the Cloudrift UI, following the existing patterns.</p>"},{"location":"development/adding-screens/#step-1-create-the-screen-widget","title":"Step 1: Create the Screen Widget","text":"<p>Create a new directory and file under <code>lib/presentation/screens/</code>:</p> <pre><code>// lib/presentation/screens/my_feature/my_feature_screen.dart\nimport 'package:flutter/material.dart';\nimport 'package:flutter_riverpod/flutter_riverpod.dart';\nimport '../../../core/theme/app_colors.dart';\n\nclass MyFeatureScreen extends ConsumerWidget {\n  const MyFeatureScreen({super.key});\n\n  @override\n  Widget build(BuildContext context, WidgetRef ref) {\n    return Scaffold(\n      backgroundColor: AppColors.background,\n      body: Padding(\n        padding: const EdgeInsets.all(24),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.start,\n          children: [\n            Text(\n              'My Feature',\n              style: Theme.of(context).textTheme.headlineMedium?.copyWith(\n                    color: AppColors.textPrimary,\n                    fontWeight: FontWeight.bold,\n                  ),\n            ),\n            const SizedBox(height: 24),\n            // Your content here\n          ],\n        ),\n      ),\n    );\n  }\n}\n</code></pre> <p>Use <code>ConsumerWidget</code> (not <code>StatelessWidget</code>) to access Riverpod providers via <code>ref</code>.</p>"},{"location":"development/adding-screens/#step-2-add-a-route","title":"Step 2: Add a Route","text":"<p>Register the screen in <code>lib/presentation/router/app_router.dart</code>:</p> <pre><code>import '../screens/my_feature/my_feature_screen.dart';\n\n// Inside the ShellRoute routes list:\nGoRoute(\n  path: '/my-feature',\n  pageBuilder: (context, state) =&gt; const NoTransitionPage(\n    child: MyFeatureScreen(),\n  ),\n),\n</code></pre> <p>All routes use <code>NoTransitionPage</code> to avoid slide/fade animations when switching screens.</p>"},{"location":"development/adding-screens/#step-3-add-navigation-item","title":"Step 3: Add Navigation Item","text":"<p>Add an entry to the navigation rail in <code>lib/presentation/shell/app_shell.dart</code>:</p> <pre><code>_NavItem(\n  route: '/my-feature',\n  icon: Icons.star_outline,\n  selectedIcon: Icons.star,\n  label: 'Feature',\n  color: AppColors.accentTeal,  // Choose an accent color\n),\n</code></pre> <p>Available accent colors:</p> Color Hex Used By <code>accentBlue</code> <code>#4A9EFF</code> Dashboard <code>accentPurple</code> <code>#9B6DFF</code> Builder <code>accentTeal</code> <code>#00D4AA</code> Resources <code>critical</code> <code>#FF3B30</code> \u2014 <code>high</code> <code>#FF9500</code> \u2014 <code>info</code> <code>#00B4D8</code> \u2014"},{"location":"development/adding-screens/#step-4-add-provider-if-needed","title":"Step 4: Add Provider (if needed)","text":"<p>If your screen needs state management, add a provider to <code>lib/providers/providers.dart</code>:</p> <pre><code>final myFeatureProvider = StateNotifierProvider&lt;MyFeatureNotifier, MyFeatureState&gt;(\n  (ref) {\n    final datasource = ref.watch(cliDatasourceProvider);\n    return MyFeatureNotifier(datasource);\n  },\n);\n</code></pre>"},{"location":"development/adding-screens/#step-5-update-the-route-comment","title":"Step 5: Update the Route Comment","text":"<p>Update the doc comment at the top of <code>app_router.dart</code> to include the new route:</p> <pre><code>/// Routes:\n/// - `/dashboard` \u2014 [DashboardScreen]\n/// - `/my-feature` \u2014 [MyFeatureScreen]  // Add this\n</code></pre>"},{"location":"development/adding-screens/#patterns-to-follow","title":"Patterns to Follow","text":""},{"location":"development/adding-screens/#dark-theme","title":"Dark Theme","text":"<p>Always use <code>AppColors</code> constants \u2014 never hardcode colors:</p> <pre><code>// Good\ncolor: AppColors.textPrimary\n\n// Bad\ncolor: Color(0xFFE8EAED)\n</code></pre>"},{"location":"development/adding-screens/#card-styling","title":"Card Styling","text":"<p>Use the standard card pattern:</p> <pre><code>Container(\n  padding: const EdgeInsets.all(20),\n  decoration: BoxDecoration(\n    color: AppColors.cardBackground,\n    borderRadius: BorderRadius.circular(12),\n    border: Border.all(color: AppColors.border),\n  ),\n  child: // ...\n)\n</code></pre>"},{"location":"development/adding-screens/#loading-states","title":"Loading States","text":"<p>Use shimmer loading placeholders:</p> <pre><code>Shimmer.fromColors(\n  baseColor: AppColors.cardBackground,\n  highlightColor: AppColors.surfaceElevated,\n  child: Container(\n    height: 200,\n    decoration: BoxDecoration(\n      color: AppColors.cardBackground,\n      borderRadius: BorderRadius.circular(12),\n    ),\n  ),\n)\n</code></pre>"},{"location":"development/adding-screens/#data-access","title":"Data Access","text":"<p>Always go through providers \u2014 never instantiate datasources directly:</p> <pre><code>// Good\nfinal result = ref.watch(latestScanResultProvider);\n\n// Bad\nfinal ds = CliDatasource();\nfinal result = await ds.runScan(...);\n</code></pre>"},{"location":"development/local-setup/","title":"Local Setup","text":""},{"location":"development/local-setup/#prerequisites","title":"Prerequisites","text":"Tool Version Install Flutter 3.24+ flutter.dev Dart 3.5+ Included with Flutter Xcode 15+ Mac App Store (macOS desktop builds) Go 1.24+ <code>brew install go</code> (for CLI) Cloudrift CLI latest Build from source (see below) AWS CLI 2.x <code>brew install awscli</code> (for credential setup)"},{"location":"development/local-setup/#clone-and-run","title":"Clone and Run","text":"<pre><code># Clone the UI repository\ngit clone https://github.com/inayathulla/cloudrift-ui.git\ncd cloudrift-ui\n\n# Install Flutter dependencies\nflutter pub get\n\n# Run on macOS desktop\nflutter run -d macos\n\n# Or run on Chrome (web mode \u2014 needs API server)\nflutter run -d chrome\n</code></pre>"},{"location":"development/local-setup/#build-the-cli","title":"Build the CLI","text":"<p>The Flutter UI requires the Cloudrift CLI binary for desktop mode:</p> <pre><code># Clone the CLI repository\ngit clone https://github.com/inayathulla/cloudrift.git\ncd cloudrift\n\n# Build the binary\ngo build -o cloudrift main.go\n\n# Install to GOPATH\ncp cloudrift ~/go/bin/cloudrift\n</code></pre> <p>The UI auto-detects the binary at <code>~/Developer/startup/cloudrift/cloudrift</code> or <code>~/go/bin/cloudrift</code>.</p>"},{"location":"development/local-setup/#build-commands","title":"Build Commands","text":"<pre><code># macOS desktop release\nflutter build macos --release\n\n# Web release\nflutter build web --release\n\n# Run analysis\nflutter analyze\n\n# Run tests\nflutter test\n\n# Docker build\ndocker build -t cloudrift-ui .\n</code></pre>"},{"location":"development/local-setup/#ide-setup","title":"IDE Setup","text":""},{"location":"development/local-setup/#vs-code","title":"VS Code","text":"<p>Recommended extensions:</p> <ul> <li>Dart \u2014 Dart language support</li> <li>Flutter \u2014 Flutter tools and commands</li> </ul> <p>Launch configuration (<code>.vscode/launch.json</code>):</p> <pre><code>{\n  \"configurations\": [\n    {\n      \"name\": \"cloudrift-ui (macOS)\",\n      \"type\": \"dart\",\n      \"request\": \"launch\",\n      \"program\": \"lib/main.dart\",\n      \"deviceId\": \"macos\"\n    },\n    {\n      \"name\": \"cloudrift-ui (Chrome)\",\n      \"type\": \"dart\",\n      \"request\": \"launch\",\n      \"program\": \"lib/main.dart\",\n      \"deviceId\": \"chrome\"\n    }\n  ]\n}\n</code></pre>"},{"location":"development/local-setup/#intellij-android-studio","title":"IntelliJ / Android Studio","text":"<ol> <li>Open the project folder</li> <li>IntelliJ auto-detects the Flutter project</li> <li>Select run device: macOS or Chrome</li> <li>Click Run</li> </ol>"},{"location":"development/local-setup/#environment","title":"Environment","text":"<p>The app uses the system's environment variables for AWS credential resolution. No additional environment configuration is needed for local development.</p> <p>For Docker development, see the Deployment guide.</p>"},{"location":"development/project-structure/","title":"Project Structure","text":""},{"location":"development/project-structure/#directory-layout","title":"Directory Layout","text":"<pre><code>cloudrift-ui/\n\u251c\u2500\u2500 lib/\n\u2502   \u251c\u2500\u2500 main.dart                          # App entry point\n\u2502   \u251c\u2500\u2500 core/\n\u2502   \u2502   \u251c\u2500\u2500 constants/\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 policy_catalog.dart        # 49 OPA security policies\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 compliance_frameworks.dart # 5 framework definitions\n\u2502   \u2502   \u2514\u2500\u2500 theme/\n\u2502   \u2502       \u251c\u2500\u2500 app_colors.dart            # Dark theme color palette\n\u2502   \u2502       \u2514\u2500\u2500 app_theme.dart             # ThemeData configuration\n\u2502   \u251c\u2500\u2500 data/\n\u2502   \u2502   \u251c\u2500\u2500 datasources/\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 cli_datasource.dart        # CLI execution (desktop) / HTTP (web)\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 config_datasource.dart     # YAML config + Terraform operations\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 local_storage_datasource.dart # Hive persistence\n\u2502   \u2502   \u2514\u2500\u2500 models/\n\u2502   \u2502       \u251c\u2500\u2500 cloudrift_config.dart      # Config YAML model\n\u2502   \u2502       \u251c\u2500\u2500 scan_result.dart           # Scan output model\n\u2502   \u2502       \u251c\u2500\u2500 terraform_status.dart      # Terraform availability model\n\u2502   \u2502       \u2514\u2500\u2500 terraform_job.dart         # Async job status model\n\u2502   \u251c\u2500\u2500 providers/\n\u2502   \u2502   \u2514\u2500\u2500 providers.dart                 # All Riverpod providers\n\u2502   \u2514\u2500\u2500 presentation/\n\u2502       \u251c\u2500\u2500 router/\n\u2502       \u2502   \u2514\u2500\u2500 app_router.dart            # GoRouter configuration\n\u2502       \u251c\u2500\u2500 shell/\n\u2502       \u2502   \u2514\u2500\u2500 app_shell.dart             # NavigationRail sidebar\n\u2502       \u251c\u2500\u2500 screens/\n\u2502       \u2502   \u251c\u2500\u2500 dashboard/\n\u2502       \u2502   \u2502   \u2514\u2500\u2500 dashboard_screen.dart\n\u2502       \u2502   \u251c\u2500\u2500 scan/\n\u2502       \u2502   \u2502   \u2514\u2500\u2500 scan_screen.dart\n\u2502       \u2502   \u251c\u2500\u2500 resource_builder/\n\u2502       \u2502   \u2502   \u2514\u2500\u2500 resource_builder_screen.dart\n\u2502       \u2502   \u251c\u2500\u2500 resources/\n\u2502       \u2502   \u2502   \u2514\u2500\u2500 resources_screen.dart\n\u2502       \u2502   \u251c\u2500\u2500 resource_detail/\n\u2502       \u2502   \u2502   \u2514\u2500\u2500 resource_detail_screen.dart\n\u2502       \u2502   \u251c\u2500\u2500 policies/\n\u2502       \u2502   \u2502   \u2514\u2500\u2500 policies_screen.dart\n\u2502       \u2502   \u251c\u2500\u2500 compliance/\n\u2502       \u2502   \u2502   \u2514\u2500\u2500 compliance_screen.dart\n\u2502       \u2502   \u2514\u2500\u2500 settings/\n\u2502       \u2502       \u2514\u2500\u2500 settings_screen.dart\n\u2502       \u2514\u2500\u2500 widgets/                       # Shared UI components\n\u251c\u2500\u2500 server/\n\u2502   \u251c\u2500\u2500 main.go                            # Go API server (14 endpoints)\n\u2502   \u2514\u2500\u2500 go.mod                             # Go module definition\n\u251c\u2500\u2500 assets/\n\u2502   \u2514\u2500\u2500 screenshots/                       # App screenshots for README\n\u251c\u2500\u2500 docs/                                  # MkDocs documentation source\n\u251c\u2500\u2500 Dockerfile                             # 4-stage multi-stage build\n\u251c\u2500\u2500 nginx.conf                             # nginx reverse proxy config\n\u251c\u2500\u2500 supervisord.conf                       # Process manager config\n\u251c\u2500\u2500 pubspec.yaml                           # Flutter dependencies\n\u251c\u2500\u2500 mkdocs.yml                             # Documentation site config\n\u2514\u2500\u2500 README.md\n</code></pre>"},{"location":"development/project-structure/#layer-responsibilities","title":"Layer Responsibilities","text":""},{"location":"development/project-structure/#libcore","title":"<code>lib/core/</code>","text":"<p>Constants and theme definitions shared across the entire app.</p> <ul> <li><code>policy_catalog.dart</code> \u2014 Defines all 49 policies with ID, name, description, severity, and compliance framework mappings</li> <li><code>compliance_frameworks.dart</code> \u2014 Defines the 5 frameworks (HIPAA, GDPR, ISO 27001, PCI DSS, SOC 2) with their labels and JSON parsing</li> <li><code>app_colors.dart</code> \u2014 16+ named colors for the dark theme (backgrounds, severities, accents, text hierarchy)</li> <li><code>app_theme.dart</code> \u2014 Assembles colors and Google Fonts into a <code>ThemeData</code></li> </ul>"},{"location":"development/project-structure/#libdata","title":"<code>lib/data/</code>","text":"<p>Data access layer \u2014 talks to CLI, files, and storage.</p> <ul> <li><code>cli_datasource.dart</code> \u2014 Dual-mode: <code>Process.run</code> on desktop, HTTP on web. Handles path detection, scan execution, JSON extraction</li> <li><code>config_datasource.dart</code> \u2014 Reads/writes YAML configs. On web, also handles Terraform status, file uploads, and plan generation via HTTP</li> <li><code>local_storage_datasource.dart</code> \u2014 Hive-based persistence for scan history entries</li> <li>Models \u2014 Data classes with <code>fromJson()</code> / <code>toJson()</code> for serialization</li> </ul>"},{"location":"development/project-structure/#libproviders","title":"<code>lib/providers/</code>","text":"<p>Riverpod provider definitions connecting data to UI.</p> <ul> <li>Datasource providers (singletons)</li> <li>Repository provider (combines datasources)</li> <li><code>ScanNotifier</code> (StateNotifier managing scan lifecycle)</li> <li>Derived providers (computed from scan results)</li> </ul>"},{"location":"development/project-structure/#libpresentation","title":"<code>lib/presentation/</code>","text":"<p>Everything the user sees and interacts with.</p> <ul> <li><code>app_router.dart</code> \u2014 GoRouter with ShellRoute for persistent sidebar</li> <li><code>app_shell.dart</code> \u2014 NavigationRail with 8 color-coded destinations</li> <li>Screens \u2014 One folder per screen, each with a single <code>*_screen.dart</code> file</li> <li>Widgets \u2014 Reusable components (charts, cards, tables, loading states)</li> </ul>"},{"location":"development/project-structure/#server","title":"<code>server/</code>","text":"<p>Go backend for Docker/web deployment.</p> <ul> <li><code>main.go</code> \u2014 Single-file HTTP server with 14 endpoints, CORS, path validation, async job pipeline</li> </ul>"},{"location":"development/testing/","title":"Testing","text":""},{"location":"development/testing/#running-tests","title":"Running Tests","text":"<pre><code># Run all tests\nflutter test\n\n# Run a specific test file\nflutter test test/my_test.dart\n\n# Run with verbose output\nflutter test --reporter expanded\n\n# Run with coverage\nflutter test --coverage\n</code></pre>"},{"location":"development/testing/#code-analysis","title":"Code Analysis","text":"<pre><code># Run the Dart analyzer\nflutter analyze\n\n# Fix auto-fixable issues\ndart fix --apply\n</code></pre> <p>The project uses <code>flutter_lints</code> for code quality rules defined in <code>analysis_options.yaml</code>.</p>"},{"location":"development/testing/#test-patterns","title":"Test Patterns","text":""},{"location":"development/testing/#widget-tests","title":"Widget Tests","text":"<p>Test individual screen widgets using <code>WidgetTester</code>:</p> <pre><code>import 'package:flutter_test/flutter_test.dart';\nimport 'package:flutter_riverpod/flutter_riverpod.dart';\n\nvoid main() {\n  testWidgets('Dashboard shows KPI cards', (tester) async {\n    await tester.pumpWidget(\n      const ProviderScope(\n        child: MaterialApp(\n          home: DashboardScreen(),\n        ),\n      ),\n    );\n\n    expect(find.text('Total Resources'), findsOneWidget);\n    expect(find.text('Drifted Resources'), findsOneWidget);\n  });\n}\n</code></pre> <p>Wrap widgets in <code>ProviderScope</code> to enable Riverpod providers.</p>"},{"location":"development/testing/#provider-tests","title":"Provider Tests","text":"<p>Test Riverpod providers using a <code>ProviderContainer</code>:</p> <pre><code>void main() {\n  test('complianceScoreProvider computes correct scores', () {\n    final container = ProviderContainer(\n      overrides: [\n        latestScanResultProvider.overrideWithValue(mockScanResult),\n      ],\n    );\n\n    final score = container.read(complianceScoreProvider);\n    expect(score.hipaa, greaterThan(0));\n    expect(score.soc2, greaterThan(0));\n  });\n}\n</code></pre>"},{"location":"development/testing/#model-tests","title":"Model Tests","text":"<p>Test JSON serialization/deserialization:</p> <pre><code>void main() {\n  test('ScanResult.fromJson parses correctly', () {\n    final json = {\n      'scan_summary': {'service': 's3', 'total_resources': 5},\n      'resources': [],\n    };\n\n    final result = ScanResult.fromJson(json);\n    expect(result.scanSummary.service, 's3');\n    expect(result.scanSummary.totalResources, 5);\n  });\n}\n</code></pre>"},{"location":"development/testing/#docker-testing","title":"Docker Testing","text":"<p>Test the full Docker deployment with the API server:</p> <pre><code># Build and run\ndocker build -t cloudrift-ui . &amp;&amp; docker run -p 8080:80 cloudrift-ui\n\n# Test health endpoint\ncurl http://localhost:8080/api/health\n\n# Test scan endpoint\ncurl -X POST http://localhost:8080/api/scan \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"service\":\"s3\",\"config_path\":\"/etc/cloudrift/config/cloudrift-s3.yml\"}'\n</code></pre>"},{"location":"development/testing/#screenshot-testing","title":"Screenshot Testing","text":"<p>Automated screenshots can be captured with Playwright:</p> <pre><code>const { chromium } = require('playwright');\n\nconst routes = [\n  '/#/dashboard', '/#/scan', '/#/resource-builder',\n  '/#/resources', '/#/policies', '/#/compliance', '/#/settings'\n];\n\n(async () =&gt; {\n  const browser = await chromium.launch();\n  const page = await browser.newPage({ viewport: { width: 1440, height: 900 } });\n\n  for (const route of routes) {\n    await page.goto(`http://localhost:8080${route}`);\n    await page.waitForTimeout(2000);\n    await page.screenshot({ path: `screenshot_${route.replace(/[/#]/g, '')}.png` });\n  }\n\n  await browser.close();\n})();\n</code></pre> <p>Verify before pushing</p> <p>Always review screenshots manually before committing. Check that all routes render correctly and no \"Page Not Found\" errors appear.</p>"},{"location":"features/compliance/","title":"Compliance Frameworks","text":"<p>Cloudrift maps its 49 security policies to 5 industry compliance frameworks, providing automated compliance scoring.</p> <p></p>"},{"location":"features/compliance/#frameworks","title":"Frameworks","text":""},{"location":"features/compliance/#hipaa-22-policies","title":"HIPAA (22 policies)","text":"<p>Health Insurance Portability and Accountability Act \u2014 protects sensitive patient health information.</p> <p>Mapped policies: S3-001, S3-003, S3-004, S3-005, S3-006, S3-007, S3-008, EC2-002, RDS-001, RDS-002, RDS-005, IAM-001, CT-001, CT-003, KMS-001, EBS-001, EBS-002, LAMBDA-002, ELB-001, ELB-002, LOG-001, LOG-002</p> <p>Focus areas: Encryption at rest, encryption in transit, access controls, audit logging, network isolation.</p>"},{"location":"features/compliance/#gdpr-17-policies","title":"GDPR (17 policies)","text":"<p>General Data Protection Regulation \u2014 EU regulation on data privacy and protection.</p> <p>Mapped policies: S3-001, S3-003, S3-004, S3-005, S3-006, S3-007, S3-008, EC2-002, RDS-001, RDS-002, IAM-001, CT-001, EBS-001, EBS-002, ELB-002, LOG-001, LOG-002</p> <p>Focus areas: Data encryption, access controls, audit trails, data protection by design.</p>"},{"location":"features/compliance/#iso-27001-32-policies","title":"ISO 27001 (32 policies)","text":"<p>International standard for information security management systems.</p> <p>Mapped policies: S3-001, S3-003, S3-004, S3-005, S3-006, S3-007, S3-008, S3-009, EC2-001, EC2-002, EC2-003, RDS-001, RDS-002, RDS-003, RDS-004, RDS-005, IAM-001, IAM-002, IAM-003, CT-002, CT-003, KMS-002, EBS-001, LAMBDA-001, LAMBDA-002, ELB-001, ELB-002, ELB-003, LOG-002, VPC-001, VPC-002, SECRET-002</p> <p>Focus areas: Comprehensive security controls, risk management, access management, operations security.</p>"},{"location":"features/compliance/#pci-dss-34-policies","title":"PCI DSS (34 policies)","text":"<p>Payment Card Industry Data Security Standard \u2014 protects cardholder data.</p> <p>Mapped policies: S3-001, S3-002, S3-003, S3-004, S3-005, S3-006, S3-007, S3-008, EC2-001, EC2-002, EC2-003, SG-001, SG-002, SG-003, SG-004, RDS-001, RDS-002, IAM-001, IAM-002, IAM-003, CT-001, CT-002, CT-003, KMS-001, EBS-001, EBS-002, LAMBDA-002, ELB-001, ELB-002, LOG-001, VPC-001, VPC-002, SECRET-001, SECRET-002</p> <p>Focus areas: Network security, strong access control, encryption, monitoring, vulnerability management.</p>"},{"location":"features/compliance/#soc-2-49-policies-all","title":"SOC 2 (49 policies \u2014 all)","text":"<p>Service Organization Control 2 \u2014 covers security, availability, processing integrity, confidentiality, and privacy.</p> <p>Mapped policies: All 49 policies</p> <p>Focus areas: The most comprehensive framework, covering all aspects of security controls.</p>"},{"location":"features/compliance/#scoring-calculation","title":"Scoring Calculation","text":"<p>Each framework's compliance score is calculated as:</p> <pre><code>Score = (Passing Policies / Total Mapped Policies) \u00d7 100%\n</code></pre> <p>A policy passes if zero violations are found for it across all scanned resources. A single violation causes the policy to fail.</p>"},{"location":"features/compliance/#score-thresholds","title":"Score Thresholds","text":"Score Color Rating 80\u2013100% Green Good 50\u201379% Yellow Needs Improvement 0\u201349% Red Critical"},{"location":"features/compliance/#compliance-screen","title":"Compliance Screen","text":"<p>The Compliance screen shows:</p> <ul> <li>Framework cards \u2014 One card per framework with score ring and pass/fail count</li> <li>Policy breakdown \u2014 Expand each framework to see which policies pass and which fail</li> <li>Score categories \u2014 Policies grouped by: Security, Tagging, Cost</li> </ul>"},{"location":"features/compliance/#using-frameworks-via-cli","title":"Using Frameworks via CLI","text":"<p>Filter compliance output to specific frameworks:</p> <pre><code>cloudrift scan --config=cloudrift-s3.yml --service=s3 --frameworks=hipaa,pci_dss\n</code></pre> <p>Available framework keys: <code>hipaa</code>, <code>gdpr</code>, <code>iso_27001</code>, <code>pci_dss</code>, <code>soc2</code></p>"},{"location":"features/dashboard/","title":"Dashboard","text":"<p>The Dashboard is the landing screen, providing an at-a-glance overview of your infrastructure's security posture.</p> <p></p>"},{"location":"features/dashboard/#kpi-cards","title":"KPI Cards","text":"<p>The top row displays four key performance indicators:</p> KPI Description Total Resources Number of AWS resources found in the latest scan Drifted Resources Resources with configuration differences from Terraform plan Policy Violations Total violations across all 49 security policies Compliance Score Weighted average across enabled compliance frameworks <p>Each card shows a trend indicator comparing to the previous scan.</p>"},{"location":"features/dashboard/#compliance-rings","title":"Compliance Rings","text":"<p>Donut charts visualize compliance scores for each of the 5 frameworks:</p> <ul> <li>HIPAA \u2014 Healthcare data protection (22 policies)</li> <li>GDPR \u2014 EU data privacy (17 policies)</li> <li>ISO 27001 \u2014 Information security management (32 policies)</li> <li>PCI DSS \u2014 Payment card security (34 policies)</li> <li>SOC 2 \u2014 Service organization controls (49 policies \u2014 all)</li> </ul> <p>The ring fill and color indicate the score: green (&gt;80%), yellow (50-80%), red (&lt;50%).</p>"},{"location":"features/dashboard/#drift-trend-chart","title":"Drift Trend Chart","text":"<p>A line chart tracks drift counts over your scan history, showing how infrastructure drift changes over time. The chart uses the accent blue (<code>#4A9EFF</code>) color from the app's palette.</p>"},{"location":"features/dashboard/#violations-by-severity","title":"Violations by Severity","text":"<p>A horizontal bar chart breaks down policy violations by severity level:</p> <ul> <li>CRITICAL \u2014 Immediate security risk</li> <li>HIGH \u2014 Significant security concern</li> <li>MEDIUM \u2014 Moderate risk, should be addressed</li> <li>LOW \u2014 Best practice recommendation</li> </ul>"},{"location":"features/dashboard/#navigation","title":"Navigation","text":"<p>Click any KPI card or chart section to navigate to the relevant detail screen:</p> <ul> <li>Total Resources \u2192 Resources screen</li> <li>Drifted Resources \u2192 Resources screen (filtered to drifted)</li> <li>Policy Violations \u2192 Policies screen</li> <li>Compliance Score \u2192 Compliance screen</li> </ul>"},{"location":"features/drift-detection/","title":"Drift Detection","text":"<p>Drift detection compares your live AWS infrastructure against Terraform plan files to find configuration differences.</p> <p></p>"},{"location":"features/drift-detection/#how-it-works","title":"How It Works","text":"<pre><code>flowchart LR\n    A[Terraform Plan JSON] --&gt; C[Cloudrift CLI]\n    B[Live AWS Resources] --&gt; C\n    C --&gt; D[Drift Report]\n    D --&gt; E[Added Attributes]\n    D --&gt; F[Removed Attributes]\n    D --&gt; G[Changed Attributes]</code></pre> <ol> <li>Read Plan \u2014 Parse the Terraform plan JSON to get expected resource state</li> <li>Query AWS \u2014 Call AWS APIs to get the current live state</li> <li>Compare \u2014 Diff each attribute between expected and actual</li> <li>Report \u2014 Categorize differences as added, removed, or changed</li> </ol>"},{"location":"features/drift-detection/#drift-categories","title":"Drift Categories","text":"Category Meaning Example Added Attribute exists in AWS but not in plan New tag added via AWS Console Removed Attribute exists in plan but not in AWS Encryption removed manually Changed Attribute differs between plan and AWS Versioning disabled vs enabled"},{"location":"features/drift-detection/#resource-detail-view","title":"Resource Detail View","text":"<p>Click any resource in the Resources list to see the 3-column diff viewer:</p> Column Content Expected Value from the Terraform plan Actual Current value from AWS Status Match, Drift, or Missing indicator <p>Each attribute row is color-coded:</p> <ul> <li>Green \u2014 Values match (no drift)</li> <li>Red \u2014 Values differ (drift detected)</li> <li>Gray \u2014 Attribute only exists on one side</li> </ul>"},{"location":"features/drift-detection/#resource-summary","title":"Resource Summary","text":"<p>The Resources screen aggregates drift data across all scanned resources:</p> <ul> <li>Resource type \u2014 AWS resource type (e.g., <code>aws_s3_bucket</code>)</li> <li>Resource name \u2014 Terraform resource identifier</li> <li>Drift count \u2014 Number of drifted attributes</li> <li>Violation count \u2014 Number of policy violations</li> <li>Status \u2014 Clean, Drifted, or Violations</li> </ul> <p>Use the search bar and filters to find specific resources or filter by drift status.</p>"},{"location":"features/drift-detection/#supported-services","title":"Supported Services","text":"Service Resource Types S3 Buckets, bucket policies, public access blocks, encryption configs EC2 Instances, security groups, volumes, network interfaces <p>Additional services can be added by extending the CLI scanner and providing the corresponding Terraform plan files.</p>"},{"location":"features/policies/","title":"Security Policies","text":"<p>Cloudrift evaluates 49 OPA (Open Policy Agent) security policies across 15 service categories. Each policy checks a specific security best practice against your AWS resources.</p> <p></p>"},{"location":"features/policies/#severity-levels","title":"Severity Levels","text":"Severity Count Meaning CRITICAL 7 Immediate security risk \u2014 fix now HIGH 14 Significant security concern MEDIUM 20 Moderate risk, should be addressed LOW 8 Best practice recommendation"},{"location":"features/policies/#policy-catalog","title":"Policy Catalog","text":""},{"location":"features/policies/#s3-storage-9-policies","title":"S3 Storage (9 policies)","text":"S3-001: S3 Encryption Required \u2014 HIGH <p>All S3 buckets must have server-side encryption enabled to protect data at rest.</p> S3-002: S3 KMS Encryption Recommended \u2014 LOW <p>Use AWS KMS for server-side encryption for better key management and auditing.</p> S3-003: S3 Block Public ACLs \u2014 HIGH <p>S3 buckets must have <code>block_public_acls</code> enabled to prevent public access via ACLs.</p> S3-004: S3 Block Public Policy \u2014 HIGH <p>S3 buckets must have <code>block_public_policy</code> enabled to prevent public bucket policies.</p> S3-005: S3 Ignore Public ACLs \u2014 HIGH <p>S3 buckets must have <code>ignore_public_acls</code> enabled to override any public ACLs.</p> S3-006: S3 Restrict Public Buckets \u2014 HIGH <p>S3 buckets must have <code>restrict_public_buckets</code> enabled.</p> S3-007: S3 No Public Read ACL \u2014 CRITICAL <p>S3 buckets must not use <code>public-read</code> ACL. Public read access exposes data to the internet.</p> S3-008: S3 No Public Read-Write ACL \u2014 CRITICAL <p>S3 buckets must not use <code>public-read-write</code> ACL. Public write access is a critical risk.</p> S3-009: S3 Versioning Recommended \u2014 MEDIUM <p>Enable versioning for data protection and recovery from accidental deletion.</p>"},{"location":"features/policies/#ec2-compute-3-policies","title":"EC2 Compute (3 policies)","text":"EC2-001: EC2 IMDSv2 Required \u2014 MEDIUM <p>EC2 instances must use Instance Metadata Service v2 (IMDSv2) to prevent SSRF attacks.</p> EC2-002: EC2 Root Volume Encryption \u2014 HIGH <p>EC2 instances must encrypt root EBS volumes to protect data at rest.</p> EC2-003: EC2 Public IP Warning \u2014 MEDIUM <p>EC2 instances should avoid public IP addresses unless explicitly required.</p>"},{"location":"features/policies/#security-groups-4-policies","title":"Security Groups (4 policies)","text":"SG-001: No Unrestricted SSH \u2014 CRITICAL <p>Security groups must not allow SSH (port 22) from <code>0.0.0.0/0</code>.</p> SG-002: No Unrestricted RDP \u2014 CRITICAL <p>Security groups must not allow RDP (port 3389) from <code>0.0.0.0/0</code>.</p> SG-003: No Unrestricted All Ports \u2014 CRITICAL <p>Security groups must not allow all ports from <code>0.0.0.0/0</code>.</p> SG-004: Database Ports Not Public \u2014 HIGH <p>Database ports (3306, 5432, 1433, 27017) must not be open to the internet.</p>"},{"location":"features/policies/#rds-databases-5-policies","title":"RDS Databases (5 policies)","text":"RDS-001: RDS Storage Encryption Required \u2014 HIGH <p>RDS instances must have storage encryption enabled.</p> RDS-002: RDS No Public Access \u2014 CRITICAL <p>RDS instances must have <code>publicly_accessible</code> set to false.</p> RDS-003: RDS Backup Retention Period \u2014 MEDIUM <p>RDS backup retention should be at least 7 days.</p> RDS-004: RDS Deletion Protection \u2014 MEDIUM <p>Enable deletion protection to prevent accidental database deletion.</p> RDS-005: RDS Multi-AZ Recommended \u2014 LOW <p>Use Multi-AZ deployment for high availability.</p>"},{"location":"features/policies/#iam-3-policies","title":"IAM (3 policies)","text":"IAM-001: No Wildcard IAM Actions \u2014 CRITICAL <p>IAM policies must not use <code>*</code> (wildcard) for actions. Follow the principle of least privilege.</p> IAM-002: No Inline Policies on Users \u2014 MEDIUM <p>Use managed policies instead of inline policies on IAM users for better governance.</p> IAM-003: IAM Role Trust Not Too Broad \u2014 HIGH <p>IAM role trust policies should restrict who can assume the role.</p>"},{"location":"features/policies/#cloudtrail-3-policies","title":"CloudTrail (3 policies)","text":"CT-001: CloudTrail KMS Encryption \u2014 HIGH <p>CloudTrail logs must be encrypted with AWS KMS.</p> CT-002: CloudTrail Log File Validation \u2014 MEDIUM <p>Enable log file validation to detect tampering.</p> CT-003: CloudTrail Multi-Region \u2014 MEDIUM <p>Enable CloudTrail for all regions.</p>"},{"location":"features/policies/#kms-2-policies","title":"KMS (2 policies)","text":"KMS-001: KMS Key Rotation Enabled \u2014 HIGH <p>Enable automatic key rotation for KMS customer-managed keys.</p> KMS-002: KMS Deletion Window Minimum \u2014 MEDIUM <p>KMS key deletion window should be at least 14 days.</p>"},{"location":"features/policies/#ebs-2-policies","title":"EBS (2 policies)","text":"EBS-001: EBS Volume Encryption \u2014 HIGH <p>All EBS volumes must be encrypted.</p> EBS-002: EBS Snapshot Encryption \u2014 HIGH <p>All EBS snapshots must be encrypted.</p>"},{"location":"features/policies/#lambda-2-policies","title":"Lambda (2 policies)","text":"LAMBDA-001: Lambda X-Ray Tracing \u2014 MEDIUM <p>Enable X-Ray tracing for Lambda functions for observability.</p> LAMBDA-002: Lambda VPC Configuration \u2014 MEDIUM <p>Lambda functions should run inside a VPC for network isolation.</p>"},{"location":"features/policies/#elbalb-3-policies","title":"ELB/ALB (3 policies)","text":"ELB-001: ALB Access Logging \u2014 MEDIUM <p>Enable access logging for Application Load Balancers.</p> ELB-002: ALB HTTPS Listener Required \u2014 HIGH <p>ALB listeners must use HTTPS protocol.</p> ELB-003: ALB Deletion Protection \u2014 MEDIUM <p>Enable deletion protection for ALBs.</p>"},{"location":"features/policies/#cloudwatch-logging-2-policies","title":"CloudWatch Logging (2 policies)","text":"LOG-001: CloudWatch Log Group KMS Encryption \u2014 MEDIUM <p>CloudWatch Log Groups should use KMS encryption.</p> LOG-002: CloudWatch Log Retention \u2014 MEDIUM <p>CloudWatch Log Groups should have a retention period configured.</p>"},{"location":"features/policies/#vpc-networking-2-policies","title":"VPC / Networking (2 policies)","text":"VPC-001: Default Security Group Restrict All \u2014 HIGH <p>The default security group should restrict all inbound and outbound traffic.</p> VPC-002: Subnet No Auto-Assign Public IP \u2014 MEDIUM <p>Subnets should not auto-assign public IP addresses.</p>"},{"location":"features/policies/#secrets-manager-2-policies","title":"Secrets Manager (2 policies)","text":"SECRET-001: Secrets Manager KMS Encryption \u2014 MEDIUM <p>Secrets should use customer-managed KMS keys for encryption.</p> SECRET-002: Secrets Automatic Rotation \u2014 MEDIUM <p>Secrets should have automatic rotation configured.</p>"},{"location":"features/policies/#cost-optimization-3-policies","title":"Cost Optimization (3 policies)","text":"EC2-005: EC2 Large Instance Review \u2014 MEDIUM <p>Large EC2 instances should be reviewed for right-sizing opportunities.</p> COST-002: Very Large Instance Size \u2014 MEDIUM <p>Very large instance types (xlarge+) should be justified.</p> COST-003: Previous Generation Instance \u2014 LOW <p>Migrate from previous-generation instance types to current generation.</p>"},{"location":"features/policies/#tagging-4-policies","title":"Tagging (4 policies)","text":"TAG-001: Environment Tag Required \u2014 MEDIUM <p>All resources must have an <code>Environment</code> tag.</p> TAG-002: Owner Tag Recommended \u2014 LOW <p>Resources should have an <code>Owner</code> tag for accountability.</p> TAG-003: Project Tag Recommended \u2014 LOW <p>Resources should have a <code>Project</code> tag for cost allocation.</p> TAG-004: Name Tag Recommended \u2014 LOW <p>Resources should have a <code>Name</code> tag for identification.</p>"},{"location":"features/policies/#custom-policies","title":"Custom Policies","text":"<p>You can add custom OPA policies by placing <code>.rego</code> files in a custom directory and setting <code>policy_dir</code> in your config:</p> <pre><code>policy_dir: ./my-policies\n</code></pre> <p>Or pass it via CLI flag:</p> <pre><code>cloudrift scan --policy-dir=./my-policies\n</code></pre>"},{"location":"features/resource-builder/","title":"Resource Builder","text":"<p>The Resource Builder generates Terraform plan JSON files that Cloudrift uses for drift detection. Three input modes are available.</p> <p></p>"},{"location":"features/resource-builder/#modes","title":"Modes","text":""},{"location":"features/resource-builder/#terraform-mode","title":"Terraform Mode","text":"<p>Run <code>terraform plan</code> directly from the UI.</p> <ol> <li>Upload your <code>.tf</code> and <code>.tfvars</code> files</li> <li>Cloudrift runs <code>terraform init</code> \u2192 <code>terraform plan</code> \u2192 <code>terraform show -json</code></li> <li>The resulting plan JSON is saved and ready for scanning</li> </ol> <p>This mode requires Terraform to be available:</p> <ul> <li>Docker: Terraform 1.7.5 is pre-installed in the container</li> <li>Desktop: Install Terraform separately (<code>brew install terraform</code>)</li> </ul> <p>The Terraform pipeline runs asynchronously with three phases:</p> Phase Timeout Description <code>init</code> 10 min Downloads providers and initializes backend <code>plan</code> 10 min Creates the execution plan <code>show</code> 5 min Converts binary plan to JSON <p>You can poll the job status to see progress and phase transitions.</p>"},{"location":"features/resource-builder/#manual-mode","title":"Manual Mode","text":"<p>Build a plan JSON structure using a form-based editor:</p> <ol> <li>Select the AWS service type</li> <li>Fill in resource attributes (name, region, settings)</li> <li>The builder generates a valid Terraform plan JSON</li> </ol> <p>This is useful when you don't have Terraform files but want to define your expected infrastructure state.</p>"},{"location":"features/resource-builder/#supported-services","title":"Supported Services","text":"Service Resource Types S3 Buckets (encryption, versioning, public access, ACLs, tags) EC2 Instances (AMI, type, subnet, security groups, tags) IAM Roles, Users, Policies, Groups (trust policies, attached policies, members, tags)"},{"location":"features/resource-builder/#upload-mode","title":"Upload Mode","text":"<p>Upload an existing Terraform plan JSON file:</p> <ol> <li>Click the upload area or drag and drop</li> <li>The file is validated and saved</li> <li>The config is updated to point to the uploaded file</li> </ol> <p>Generate plan files from the command line:</p> <pre><code>terraform plan -out=tfplan\nterraform show -json tfplan &gt; plan.json\n</code></pre>"},{"location":"features/resource-builder/#web-api-integration","title":"Web API Integration","text":"<p>In Docker/web mode, the Resource Builder uses these API endpoints:</p> Endpoint Method Purpose <code>/api/terraform/status</code> GET Check Terraform availability <code>/api/terraform/upload</code> POST Upload .tf/.tfvars files <code>/api/terraform/plan</code> POST Start async plan job <code>/api/terraform/job?id=</code> GET Poll job status <code>/api/files/upload</code> POST Upload plan JSON <code>/api/files/generate-plan</code> POST Generate plan from form data <p>See the Terraform Endpoints documentation for full API details.</p>"},{"location":"features/scanning/","title":"Scanning","text":"<p>The Scan screen lets you run infrastructure drift detection against your AWS environment.</p> <p></p>"},{"location":"features/scanning/#service-selector","title":"Service Selector","text":"<p>Choose which AWS service to scan:</p> Service Config File Plan File S3 <code>cloudrift-s3.yml</code> <code>plan.json</code> EC2 <code>cloudrift-ec2.yml</code> <code>ec2-plan.json</code> IAM <code>cloudrift-iam.yml</code> <code>iam-plan.json</code> <p>The config path auto-updates when you switch services.</p>"},{"location":"features/scanning/#scan-parameters","title":"Scan Parameters","text":"Parameter Description Default Config Path Path to <code>cloudrift-&lt;service&gt;.yml</code> Auto-detected Policy Directory Custom OPA policy directory Built-in policies Skip Policies Skip OPA policy evaluation <code>false</code>"},{"location":"features/scanning/#scan-lifecycle","title":"Scan Lifecycle","text":"<pre><code>stateDiagram-v2\n    [*] --&gt; Idle\n    Idle --&gt; Running: Click \"Run Scan\"\n    Running --&gt; Completed: Success\n    Running --&gt; Error: Failure\n    Completed --&gt; Idle: New scan\n    Error --&gt; Idle: Retry</code></pre>"},{"location":"features/scanning/#desktop-mode","title":"Desktop Mode","text":"<p>On macOS desktop, the scan runs the CLI binary directly:</p> <pre><code>cloudrift scan \\\n  --config=cloudrift-s3.yml \\\n  --service=s3 \\\n  --format=json \\\n  --no-emoji\n</code></pre> <p>The app invokes this via <code>Process.run</code> with the working directory set to the CLI repo folder.</p>"},{"location":"features/scanning/#web-mode-docker","title":"Web Mode (Docker)","text":"<p>In Docker/web mode, the scan calls the backend API:</p> <pre><code>POST /api/scan\nContent-Type: application/json\n\n{\n  \"service\": \"s3\",\n  \"config_path\": \"/etc/cloudrift/config/cloudrift-s3.yml\"\n}\n</code></pre> <p>The Go API server executes the CLI binary server-side and returns the JSON result.</p>"},{"location":"features/scanning/#scan-output","title":"Scan Output","text":"<p>A successful scan produces:</p> <ul> <li>Drift results \u2014 Per-resource comparison (added/removed/changed attributes)</li> <li>Policy violations \u2014 OPA evaluation results for all applicable policies</li> <li>Compliance scores \u2014 Framework-level pass/fail percentages</li> <li>Resource summaries \u2014 Aggregated view of all scanned resources</li> </ul> <p>Results are stored in local history (Hive on desktop, browser storage on web) and feed the Dashboard, Resources, Policies, and Compliance screens.</p>"},{"location":"features/scanning/#cli-flags","title":"CLI Flags","text":"<p>The full set of CLI flags available for scanning:</p> Flag Short Description <code>--config</code> <code>-c</code> Path to config YAML file <code>--service</code> <code>-s</code> AWS service to scan (s3, ec2, iam) <code>--format</code> <code>-f</code> Output format (json, table, text) <code>--no-emoji</code> \u2014 Disable emoji in output <code>--policy-dir</code> <code>-p</code> Custom OPA policy directory <code>--skip-policies</code> \u2014 Skip policy evaluation <code>--frameworks</code> \u2014 Compliance frameworks to evaluate <code>--fail-on-violation</code> \u2014 Exit non-zero on violations"},{"location":"getting-started/aws-credentials/","title":"AWS Credentials","text":"<p>Cloudrift needs read-only AWS access to scan your infrastructure. It uses the standard AWS credential chain.</p>"},{"location":"getting-started/aws-credentials/#credential-resolution-order","title":"Credential Resolution Order","text":"<ol> <li>Environment variables \u2014 <code>AWS_ACCESS_KEY_ID</code>, <code>AWS_SECRET_ACCESS_KEY</code>, <code>AWS_SESSION_TOKEN</code></li> <li>Shared credentials file \u2014 <code>~/.aws/credentials</code> (profile from <code>aws_profile</code> in config)</li> <li>AWS config file \u2014 <code>~/.aws/config</code></li> <li>EC2 instance role \u2014 IAM role attached to the instance</li> <li>ECS task role \u2014 IAM role attached to the ECS task</li> </ol>"},{"location":"getting-started/aws-credentials/#docker-setup","title":"Docker Setup","text":"<p>Mount your AWS credentials into the container:</p> <pre><code>docker run -p 8080:80 \\\n  -v ~/.aws:/root/.aws:ro \\\n  inayathulla/cloudrift-ui:latest\n</code></pre> <p>Read-only mount</p> <p>Always use <code>:ro</code> to mount credentials read-only. Cloudrift never writes to your credentials file.</p>"},{"location":"getting-started/aws-credentials/#using-environment-variables","title":"Using Environment Variables","text":"<pre><code>docker run -p 8080:80 \\\n  -e AWS_ACCESS_KEY_ID=AKIA... \\\n  -e AWS_SECRET_ACCESS_KEY=... \\\n  -e AWS_DEFAULT_REGION=us-east-1 \\\n  inayathulla/cloudrift-ui:latest\n</code></pre>"},{"location":"getting-started/aws-credentials/#using-a-named-profile","title":"Using a Named Profile","text":"<pre><code>docker run -p 8080:80 \\\n  -v ~/.aws:/root/.aws:ro \\\n  -e AWS_PROFILE=production \\\n  inayathulla/cloudrift-ui:latest\n</code></pre> <p>Then set <code>aws_profile: production</code> in your <code>cloudrift-s3.yml</code>.</p>"},{"location":"getting-started/aws-credentials/#desktop-setup","title":"Desktop Setup","text":"<p>The desktop app inherits your shell environment. If <code>aws</code> CLI works, Cloudrift will too.</p> <pre><code># Verify credentials\naws sts get-caller-identity\n</code></pre>"},{"location":"getting-started/aws-credentials/#required-iam-permissions","title":"Required IAM Permissions","text":"<p>Cloudrift needs read-only access to the services you're scanning:</p>"},{"location":"getting-started/aws-credentials/#s3-scanning","title":"S3 Scanning","text":"<pre><code>{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:GetBucketEncryption\",\n        \"s3:GetBucketVersioning\",\n        \"s3:GetBucketPublicAccessBlock\",\n        \"s3:GetBucketAcl\",\n        \"s3:GetBucketTagging\",\n        \"s3:ListAllMyBuckets\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}\n</code></pre>"},{"location":"getting-started/aws-credentials/#ec2-scanning","title":"EC2 Scanning","text":"<pre><code>{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"ec2:DescribeInstances\",\n        \"ec2:DescribeSecurityGroups\",\n        \"ec2:DescribeVolumes\",\n        \"ec2:DescribeSubnets\",\n        \"ec2:DescribeVpcs\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}\n</code></pre>"},{"location":"getting-started/aws-credentials/#iam-scanning","title":"IAM Scanning","text":"<pre><code>{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"iam:GetRole\",\n        \"iam:ListRoles\",\n        \"iam:ListRolePolicies\",\n        \"iam:ListAttachedRolePolicies\",\n        \"iam:GetUser\",\n        \"iam:ListUsers\",\n        \"iam:ListUserPolicies\",\n        \"iam:ListAttachedUserPolicies\",\n        \"iam:GetPolicy\",\n        \"iam:GetPolicyVersion\",\n        \"iam:ListPolicies\",\n        \"iam:GetGroup\",\n        \"iam:ListGroups\",\n        \"iam:ListGroupPolicies\",\n        \"iam:ListAttachedGroupPolicies\",\n        \"iam:ListGroupsForUser\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}\n</code></pre> <p>Use AWS managed policies</p> <p>For quick setup, attach <code>ReadOnlyAccess</code> or the service-specific read-only policies like <code>AmazonS3ReadOnlyAccess</code>, <code>AmazonEC2ReadOnlyAccess</code>, and <code>IAMReadOnlyAccess</code>.</p>"},{"location":"getting-started/aws-credentials/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/aws-credentials/#nocredentialproviders-error","title":"\"NoCredentialProviders\" Error","text":"<p>The CLI cannot find valid AWS credentials.</p> <ol> <li>Check that <code>~/.aws/credentials</code> exists and contains the profile</li> <li>For Docker, verify the volume mount: <code>docker exec &lt;container&gt; cat /root/.aws/credentials</code></li> <li>Try setting credentials via environment variables</li> </ol>"},{"location":"getting-started/aws-credentials/#expiredtoken-error","title":"\"ExpiredToken\" Error","text":"<p>Your AWS session token has expired.</p> <pre><code># Refresh SSO credentials\naws sso login --profile your-profile\n\n# Or refresh STS credentials\naws sts get-session-token\n</code></pre>"},{"location":"getting-started/aws-credentials/#accessdenied-error","title":"\"AccessDenied\" Error","text":"<p>Your IAM user/role lacks the required permissions. Check the IAM permissions section above and verify your policy allows the necessary <code>Describe*</code> and <code>Get*</code> actions.</p>"},{"location":"getting-started/aws-credentials/#docker-specific-issues","title":"Docker-Specific Issues","text":"<p>If scans work on desktop but fail in Docker:</p> <ol> <li>Verify the mount: <code>docker exec &lt;container&gt; ls -la /root/.aws/</code></li> <li>Check the profile exists: <code>docker exec &lt;container&gt; cat /root/.aws/credentials</code></li> <li>Test from inside the container: <code>docker exec &lt;container&gt; cloudrift scan --help</code></li> </ol>"},{"location":"getting-started/configuration/","title":"Configuration","text":"<p>Cloudrift uses a YAML configuration file to define AWS credentials, region, and scan parameters.</p>"},{"location":"getting-started/configuration/#config-file-format","title":"Config File Format","text":"<pre><code>aws_profile: default\nregion: us-east-1\nplan_path: ./examples/terraform-plan.json\npolicy_dir: ./policies          # optional\nfail_on_violation: false        # optional\nskip_policies: false            # optional\n</code></pre>"},{"location":"getting-started/configuration/#fields","title":"Fields","text":"Field Type Required Default Description <code>aws_profile</code> string yes <code>default</code> AWS credentials profile name from <code>~/.aws/credentials</code> <code>region</code> string yes <code>us-east-1</code> AWS region to scan <code>plan_path</code> string yes \u2014 Path to Terraform plan JSON file <code>policy_dir</code> string no built-in Custom OPA policy directory <code>fail_on_violation</code> bool no <code>false</code> Exit with non-zero code when violations are found <code>skip_policies</code> bool no <code>false</code> Skip OPA policy evaluation entirely"},{"location":"getting-started/configuration/#multiple-service-configs","title":"Multiple Service Configs","text":"<p>Each AWS service needs its own plan file. Create separate configs:</p> S3 (cloudrift-s3.yml)EC2 (cloudrift-ec2.yml)IAM (cloudrift-iam.yml) <pre><code>aws_profile: default\nregion: us-east-1\nplan_path: ./examples/plan.json\n</code></pre> <pre><code>aws_profile: default\nregion: us-east-1\nplan_path: ./examples/ec2-plan.json\n</code></pre> <pre><code>aws_profile: default\nregion: us-east-1\nplan_path: ./examples/iam-plan.json\n</code></pre> <p>The Scan screen auto-switches the config path when you change the service selector.</p>"},{"location":"getting-started/configuration/#config-locations","title":"Config Locations","text":""},{"location":"getting-started/configuration/#docker","title":"Docker","text":"<p>The Docker image includes default configs at:</p> <pre><code>/etc/cloudrift/config/cloudrift-s3.yml\n/etc/cloudrift/examples/terraform-plan.json\n</code></pre>"},{"location":"getting-started/configuration/#desktop","title":"Desktop","text":"<p>The app looks for configs relative to the CLI binary's directory:</p> <pre><code>&lt;cloudrift-repo&gt;/config/cloudrift-s3.yml\n&lt;cloudrift-repo&gt;/config/cloudrift-ec2.yml\n&lt;cloudrift-repo&gt;/config/cloudrift-iam.yml\n</code></pre>"},{"location":"getting-started/configuration/#web-api","title":"Web API","text":"<p>Use the config endpoints to read and write configs:</p> <pre><code># Read current config\ncurl http://localhost:8080/api/config?path=/etc/cloudrift/config/cloudrift-s3.yml\n\n# Update config\ncurl -X PUT http://localhost:8080/api/config?path=/etc/cloudrift/config/cloudrift-s3.yml \\\n  -d 'aws_profile: production\nregion: eu-west-1\nplan_path: /etc/cloudrift/examples/terraform-plan.json'\n</code></pre>"},{"location":"getting-started/configuration/#plan-file-format","title":"Plan File Format","text":"<p>The <code>plan_path</code> should point to a Terraform plan JSON file generated by:</p> <pre><code>terraform plan -out=tfplan\nterraform show -json tfplan &gt; plan.json\n</code></pre> <p>The plan file contains the full resource graph that Cloudrift uses for drift detection. See the Resource Builder for generating plan files from the UI.</p>"},{"location":"getting-started/quick-start/","title":"Quick Start","text":"<p>Cloudrift runs in two modes: Docker (web browser) or Desktop (native macOS app). Both provide the same UI and features.</p>"},{"location":"getting-started/quick-start/#docker-recommended","title":"Docker (Recommended)","text":"<p>The Docker image bundles the Go CLI, API server, Flutter web app, nginx, and Terraform into a single container.</p>"},{"location":"getting-started/quick-start/#pull-and-run","title":"Pull and Run","text":"<pre><code>docker pull inayathulla/cloudrift-ui:latest\ndocker run -p 8080:80 \\\n  -v ~/.aws:/root/.aws:ro \\\n  inayathulla/cloudrift-ui:latest\n</code></pre> <p>Open http://localhost:8080 in your browser.</p>"},{"location":"getting-started/quick-start/#whats-inside","title":"What's Inside","text":"<p>The Docker image runs three processes via <code>supervisord</code>:</p> Process Port Purpose nginx 80 Serves Flutter web app, proxies <code>/api/*</code> cloudrift-api 8081 Go REST API wrapping the CLI terraform \u2014 Available for Resource Builder operations"},{"location":"getting-started/quick-start/#verify-its-working","title":"Verify It's Working","text":"<pre><code># Health check\ncurl http://localhost:8080/api/health\n# \u2192 {\"available\":true}\n\n# CLI version\ncurl http://localhost:8080/api/version\n# \u2192 {\"version\":\"cloudrift v1.0.0\"}\n</code></pre>"},{"location":"getting-started/quick-start/#desktop-macos","title":"Desktop (macOS)","text":"<p>The desktop app calls the Cloudrift CLI binary directly via <code>Process.run</code>.</p>"},{"location":"getting-started/quick-start/#prerequisites","title":"Prerequisites","text":"Tool Version Install Flutter 3.24+ flutter.dev Xcode 15+ Mac App Store Go 1.24+ <code>brew install go</code> Cloudrift CLI latest See below"},{"location":"getting-started/quick-start/#build-the-cli","title":"Build the CLI","text":"<pre><code>git clone https://github.com/inayathulla/cloudrift.git\ncd cloudrift\ngo build -o cloudrift main.go\ncp cloudrift ~/go/bin/cloudrift\n</code></pre>"},{"location":"getting-started/quick-start/#run-the-desktop-app","title":"Run the Desktop App","text":"<pre><code>git clone https://github.com/inayathulla/cloudrift-ui.git\ncd cloudrift-ui\nflutter pub get\nflutter run -d macos\n</code></pre>"},{"location":"getting-started/quick-start/#build-a-release","title":"Build a Release","text":"<pre><code>flutter build macos --release\n# Output: build/macos/Build/Products/Release/cloudrift_ui.app (~44 MB)\n</code></pre> <p>The app auto-detects the CLI binary at these locations (in order):</p> <ol> <li><code>~/Developer/startup/cloudrift/cloudrift</code></li> <li><code>~/cloudrift/cloudrift</code></li> <li>Sibling directory to <code>cloudrift-ui</code></li> <li><code>$GOPATH/bin/cloudrift</code></li> <li><code>cloudrift</code> on <code>$PATH</code></li> </ol> <p>You can also set the path manually in Settings.</p>"},{"location":"getting-started/quick-start/#first-scan","title":"First Scan","text":"<p>Once running (Docker or Desktop):</p> <ol> <li>Navigate to the Scan screen</li> <li>Select a service (S3 or EC2)</li> <li>Verify the config path points to a valid <code>cloudrift-&lt;service&gt;.yml</code></li> <li>Click Run Scan</li> </ol> <p>The scan will detect drift between your live AWS resources and your Terraform plan file, then evaluate all 49 security policies.</p> <p>Need a sample config?</p> <p>The Docker image includes example configs at <code>/etc/cloudrift/config/</code> and example plan files at <code>/etc/cloudrift/examples/</code>.</p>"}]}